const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Header-C3kA2NZb.js","assets/react-BKEbDJhF.js","assets/motion-BaJTjmjD.js","assets/icons-5Lq8eyna.js","assets/vendor-CmZZtmkI.js","assets/HeroSection-DYOCj8nT.js","assets/hoorAPI-Cq8-pE1i.js","assets/FeaturesSection-Ez5gPgAz.js","assets/HowItWorksSection-BU6N1Uv0.js","assets/VoiceInteractionSection-DZkEsT_L.js","assets/SolutionsSection-D2AGDMcP.js","assets/SectorsSection-JEqXBjh6.js","assets/TrustSection-BZCu4ssL.js","assets/VoiceButton-BAeeFQxG.js","assets/ProjectFlow-D-wy3iZy.js","assets/api-DwJhbZKn.js","assets/MapLocationSelector-DqSfnpXw.js","assets/Dashboard-ot-w9VQJ.js","assets/CartesianChart-DLx_XKTg.js","assets/AreaChart-DfAUC8tr.js","assets/PieChart-s7UNv2BV.js","assets/AnalysisResults-CBYAbuFd.js","assets/ErrorBarContext-DB5jvi18.js","assets/PricingPlans-BsovSuaD.js","assets/AuthModal-B95GFGHG.js","assets/HelpCenter-g9tkbAyt.js","assets/UserProfile-VxKoIVGb.js","assets/NotificationCenter-DaiOMKjO.js","assets/LoadingScreen-DLQKArKx.js","assets/Footer-BMopYdOT.js","assets/ErrorBoundary-DEkwTBv_.js","assets/ProtectedRoute-Ceoqm7OX.js","assets/AdminRoute-BYoqi2b8.js","assets/AdminDashboard-CP5PYsEQ.js","assets/DataPrivacyModal-gy6tzUXB.js","assets/SecurityBadge-BLj8_3Oc.js","assets/SystemStatus-BukzRCu7.js","assets/VoiceGreeting-zPo-4-8T.js","assets/SectorPage-DawSlItR.js","assets/LocationAnalysisPage-D2M4MaaR.js","assets/BlogIndex-36THvQkZ.js","assets/BlogPostPage-Bw7Aqfk-.js"])))=>i.map(i=>d[i]);
var Ln=Object.defineProperty;var zn=(i,e,t)=>e in i?Ln(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var et=(i,e,t)=>zn(i,typeof e!="symbol"?e+"":e,t);import{r as q,b as Hn,g as qn,c as G,a as Wn}from"./react-BKEbDJhF.js";import{c as Mn,r as Vn}from"./vendor-CmZZtmkI.js";import{A as lr,m as Kt}from"./motion-BaJTjmjD.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();var Zi={exports:{}},As={};/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var i=q,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),_=Symbol.iterator,w="@@iterator";function y(C){if(C===null||typeof C!="object")return null;var z=_&&C[_]||C[w];return typeof z=="function"?z:null}var A=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function m(C){{for(var z=arguments.length,M=new Array(z>1?z-1:0),X=1;X<z;X++)M[X-1]=arguments[X];g("error",C,M)}}function g(C,z,M){{var X=A.ReactDebugCurrentFrame,de=X.getStackAddendum();de!==""&&(z+="%s",M=M.concat([de]));var ve=M.map(function(ae){return String(ae)});ve.unshift("Warning: "+z),Function.prototype.apply.call(console[C],console,ve)}}var E=!1,k=!1,D=!1,F=!1,P=!1,H;H=Symbol.for("react.module.reference");function S(C){return!!(typeof C=="string"||typeof C=="function"||C===r||C===n||P||C===s||C===u||C===d||F||C===v||E||k||D||typeof C=="object"&&C!==null&&(C.$$typeof===p||C.$$typeof===f||C.$$typeof===a||C.$$typeof===o||C.$$typeof===h||C.$$typeof===H||C.getModuleId!==void 0))}function R(C,z,M){var X=C.displayName;if(X)return X;var de=z.displayName||z.name||"";return de!==""?M+"("+de+")":M}function N(C){return C.displayName||"Context"}function O(C){if(C==null)return null;if(typeof C.tag=="number"&&m("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C;switch(C){case r:return"Fragment";case t:return"Portal";case n:return"Profiler";case s:return"StrictMode";case u:return"Suspense";case d:return"SuspenseList"}if(typeof C=="object")switch(C.$$typeof){case o:var z=C;return N(z)+".Consumer";case a:var M=C;return N(M._context)+".Provider";case h:return R(C,C.render,"ForwardRef");case f:var X=C.displayName||null;return X!==null?X:O(C.type)||"Memo";case p:{var de=C,ve=de._payload,ae=de._init;try{return O(ae(ve))}catch{return null}}}return null}var V=Object.assign,K=0,J,ue,ee,ce,ie,j,I;function $(){}$.__reactDisabledLog=!0;function L(){{if(K===0){J=console.log,ue=console.info,ee=console.warn,ce=console.error,ie=console.group,j=console.groupCollapsed,I=console.groupEnd;var C={configurable:!0,enumerable:!0,value:$,writable:!0};Object.defineProperties(console,{info:C,log:C,warn:C,error:C,group:C,groupCollapsed:C,groupEnd:C})}K++}}function oe(){{if(K--,K===0){var C={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:V({},C,{value:J}),info:V({},C,{value:ue}),warn:V({},C,{value:ee}),error:V({},C,{value:ce}),group:V({},C,{value:ie}),groupCollapsed:V({},C,{value:j}),groupEnd:V({},C,{value:I})})}K<0&&m("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var le=A.ReactCurrentDispatcher,be;function Y(C,z,M){{if(be===void 0)try{throw Error()}catch(de){var X=de.stack.trim().match(/\n( *(at )?)/);be=X&&X[1]||""}return`
`+be+C}}var Le=!1,Pe;{var mt=typeof WeakMap=="function"?WeakMap:Map;Pe=new mt}function We(C,z){if(!C||Le)return"";{var M=Pe.get(C);if(M!==void 0)return M}var X;Le=!0;var de=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var ve;ve=le.current,le.current=null,L();try{if(z){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Ue){X=Ue}Reflect.construct(C,[],ae)}else{try{ae.call()}catch(Ue){X=Ue}C.call(ae.prototype)}}else{try{throw Error()}catch(Ue){X=Ue}C()}}catch(Ue){if(Ue&&X&&typeof Ue.stack=="string"){for(var re=Ue.stack.split(`
`),Te=X.stack.split(`
`),Ee=re.length-1,Ce=Te.length-1;Ee>=1&&Ce>=0&&re[Ee]!==Te[Ce];)Ce--;for(;Ee>=1&&Ce>=0;Ee--,Ce--)if(re[Ee]!==Te[Ce]){if(Ee!==1||Ce!==1)do if(Ee--,Ce--,Ce<0||re[Ee]!==Te[Ce]){var He=`
`+re[Ee].replace(" at new "," at ");return C.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",C.displayName)),typeof C=="function"&&Pe.set(C,He),He}while(Ee>=1&&Ce>=0);break}}}finally{Le=!1,le.current=ve,oe(),Error.prepareStackTrace=de}var St=C?C.displayName||C.name:"",yt=St?Y(St):"";return typeof C=="function"&&Pe.set(C,yt),yt}function Ae(C,z,M){return We(C,!1)}function we(C){var z=C.prototype;return!!(z&&z.isReactComponent)}function Me(C,z,M){if(C==null)return"";if(typeof C=="function")return We(C,we(C));if(typeof C=="string")return Y(C);switch(C){case u:return Y("Suspense");case d:return Y("SuspenseList")}if(typeof C=="object")switch(C.$$typeof){case h:return Ae(C.render);case f:return Me(C.type,z,M);case p:{var X=C,de=X._payload,ve=X._init;try{return Me(ve(de),z,M)}catch{}}}return""}var ze=Object.prototype.hasOwnProperty,Ve={},Je=A.ReactDebugCurrentFrame;function Xe(C){if(C){var z=C._owner,M=Me(C.type,C._source,z?z.type:null);Je.setExtraStackFrame(M)}else Je.setExtraStackFrame(null)}function Qe(C,z,M,X,de){{var ve=Function.call.bind(ze);for(var ae in C)if(ve(C,ae)){var re=void 0;try{if(typeof C[ae]!="function"){var Te=Error((X||"React class")+": "+M+" type `"+ae+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof C[ae]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Te.name="Invariant Violation",Te}re=C[ae](z,ae,X,M,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Ee){re=Ee}re&&!(re instanceof Error)&&(Xe(de),m("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",X||"React class",M,ae,typeof re),Xe(null)),re instanceof Error&&!(re.message in Ve)&&(Ve[re.message]=!0,Xe(de),m("Failed %s type: %s",M,re.message),Xe(null))}}}var Se=Array.isArray;function xe(C){return Se(C)}function Ie(C){{var z=typeof Symbol=="function"&&Symbol.toStringTag,M=z&&C[Symbol.toStringTag]||C.constructor.name||"Object";return M}}function lt(C){try{return Oe(C),!1}catch{return!0}}function Oe(C){return""+C}function Ke(C){if(lt(C))return m("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ie(C)),Oe(C)}var x=A.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0},l,b,B;B={};function T(C){if(ze.call(C,"ref")){var z=Object.getOwnPropertyDescriptor(C,"ref").get;if(z&&z.isReactWarning)return!1}return C.ref!==void 0}function U(C){if(ze.call(C,"key")){var z=Object.getOwnPropertyDescriptor(C,"key").get;if(z&&z.isReactWarning)return!1}return C.key!==void 0}function Q(C,z){if(typeof C.ref=="string"&&x.current&&z&&x.current.stateNode!==z){var M=O(x.current.type);B[M]||(m('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',O(x.current.type),C.ref),B[M]=!0)}}function pe(C,z){{var M=function(){l||(l=!0,m("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",z))};M.isReactWarning=!0,Object.defineProperty(C,"key",{get:M,configurable:!0})}}function fe(C,z){{var M=function(){b||(b=!0,m("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",z))};M.isReactWarning=!0,Object.defineProperty(C,"ref",{get:M,configurable:!0})}}var ge=function(C,z,M,X,de,ve,ae){var re={$$typeof:e,type:C,key:z,ref:M,props:ae,_owner:ve};return re._store={},Object.defineProperty(re._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(re,"_self",{configurable:!1,enumerable:!1,writable:!1,value:X}),Object.defineProperty(re,"_source",{configurable:!1,enumerable:!1,writable:!1,value:de}),Object.freeze&&(Object.freeze(re.props),Object.freeze(re)),re};function he(C,z,M,X,de){{var ve,ae={},re=null,Te=null;M!==void 0&&(Ke(M),re=""+M),U(z)&&(Ke(z.key),re=""+z.key),T(z)&&(Te=z.ref,Q(z,de));for(ve in z)ze.call(z,ve)&&!c.hasOwnProperty(ve)&&(ae[ve]=z[ve]);if(C&&C.defaultProps){var Ee=C.defaultProps;for(ve in Ee)ae[ve]===void 0&&(ae[ve]=Ee[ve])}if(re||Te){var Ce=typeof C=="function"?C.displayName||C.name||"Unknown":C;re&&pe(ae,Ce),Te&&fe(ae,Ce)}return ge(C,re,Te,de,X,x.current,ae)}}var Ht=A.ReactCurrentOwner,qt=A.ReactDebugCurrentFrame;function ut(C){if(C){var z=C._owner,M=Me(C.type,C._source,z?z.type:null);qt.setExtraStackFrame(M)}else qt.setExtraStackFrame(null)}var kt;kt=!1;function Wt(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function nr(){{if(Ht.current){var C=O(Ht.current.type);if(C)return`

Check the render method of \``+C+"`."}return""}}function Fr(C){{if(C!==void 0){var z=C.fileName.replace(/^.*[\\\/]/,""),M=C.lineNumber;return`

Check your code at `+z+":"+M+"."}return""}}var Mt={};function jr(C){{var z=nr();if(!z){var M=typeof C=="string"?C:C.displayName||C.name;M&&(z=`

Check the top-level render call using <`+M+">.")}return z}}function or(C,z){{if(!C._store||C._store.validated||C.key!=null)return;C._store.validated=!0;var M=jr(z);if(Mt[M])return;Mt[M]=!0;var X="";C&&C._owner&&C._owner!==Ht.current&&(X=" It was passed a child from "+O(C._owner.type)+"."),ut(C),m('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',M,X),ut(null)}}function Vt(C,z){{if(typeof C!="object")return;if(xe(C))for(var M=0;M<C.length;M++){var X=C[M];Wt(X)&&or(X,z)}else if(Wt(C))C._store&&(C._store.validated=!0);else if(C){var de=y(C);if(typeof de=="function"&&de!==C.entries)for(var ve=de.call(C),ae;!(ae=ve.next()).done;)Wt(ae.value)&&or(ae.value,z)}}}function Tr(C){{var z=C.type;if(z==null||typeof z=="string")return;var M;if(typeof z=="function")M=z.propTypes;else if(typeof z=="object"&&(z.$$typeof===h||z.$$typeof===f))M=z.propTypes;else return;if(M){var X=O(z);Qe(M,C.props,"prop",X,C)}else if(z.PropTypes!==void 0&&!kt){kt=!0;var de=O(z);m("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",de||"Unknown")}typeof z.getDefaultProps=="function"&&!z.getDefaultProps.isReactClassApproved&&m("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function ar(C){{for(var z=Object.keys(C.props),M=0;M<z.length;M++){var X=z[M];if(X!=="children"&&X!=="key"){ut(C),m("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",X),ut(null);break}}C.ref!==null&&(ut(C),m("Invalid attribute `ref` supplied to `React.Fragment`."),ut(null))}}var je={};function Ze(C,z,M,X,de,ve){{var ae=S(C);if(!ae){var re="";(C===void 0||typeof C=="object"&&C!==null&&Object.keys(C).length===0)&&(re+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Te=Fr(de);Te?re+=Te:re+=nr();var Ee;C===null?Ee="null":xe(C)?Ee="array":C!==void 0&&C.$$typeof===e?(Ee="<"+(O(C.type)||"Unknown")+" />",re=" Did you accidentally export a JSX literal instead of a component?"):Ee=typeof C,m("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Ee,re)}var Ce=he(C,z,M,de,ve);if(Ce==null)return Ce;if(ae){var He=z.children;if(He!==void 0)if(X)if(xe(He)){for(var St=0;St<He.length;St++)Vt(He[St],C);Object.freeze&&Object.freeze(He)}else m("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Vt(He,C)}if(ze.call(z,"key")){var yt=O(C),Ue=Object.keys(z).filter(function($n){return $n!=="key"}),Rr=Ue.length>0?"{key: someKey, "+Ue.join(": ..., ")+": ...}":"{key: someKey}";if(!je[yt+Rr]){var Nn=Ue.length>0?"{"+Ue.join(": ..., ")+": ...}":"{}";m(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Rr,yt,Nn,yt),je[yt+Rr]=!0}}return C===r?ar(Ce):Tr(Ce),Ce}}var cr=Ze;As.Fragment=r,As.jsxDEV=cr})();Zi.exports=As;var W=Zi.exports,en,Js=Hn;{var Xs=Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;en=function(i,e){Xs.usingClientEntryPoint=!0;try{return Js.createRoot(i,e)}finally{Xs.usingClientEntryPoint=!1}}}const Kn="modulepreload",Gn=function(i){return"/"+i},Qs={},se=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(h=>{if(h=Gn(h),h in Qs)return;Qs[h]=!0;const u=h.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Kn,u||(f.as="script"),f.crossOrigin="",f.href=h,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&n(o.reason);return e().catch(n)})};let Yn={data:""},Jn=i=>typeof window=="object"?((i?i.querySelector("#_goober"):window._goober)||Object.assign((i||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:i||Yn,Xn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Qn=/\/\*[^]*?\*\/|  +/g,Zs=/\n+/g,ft=(i,e)=>{let t="",r="",s="";for(let n in i){let a=i[n];n[0]=="@"?n[1]=="i"?t=n+" "+a+";":r+=n[1]=="f"?ft(a,n):n+"{"+ft(a,n[1]=="k"?"":e)+"}":typeof a=="object"?r+=ft(a,e?e.replace(/([^,])+/g,o=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,o):o?o+" "+h:h)):n):a!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ft.p?ft.p(n,a):n+":"+a+";")}return t+(e&&s?e+"{"+s+"}":s)+r},it={},tn=i=>{if(typeof i=="object"){let e="";for(let t in i)e+=t+tn(i[t]);return e}return i},Zn=(i,e,t,r,s)=>{let n=tn(i),a=it[n]||(it[n]=(h=>{let u=0,d=11;for(;u<h.length;)d=101*d+h.charCodeAt(u++)>>>0;return"go"+d})(n));if(!it[a]){let h=n!==i?i:(u=>{let d,f,p=[{}];for(;d=Xn.exec(u.replace(Qn,""));)d[4]?p.shift():d[3]?(f=d[3].replace(Zs," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(Zs," ").trim();return p[0]})(i);it[a]=ft(s?{["@keyframes "+a]:h}:h,t?"":"."+a)}let o=t&&it.g?it.g:null;return t&&(it.g=it[a]),((h,u,d,f)=>{f?u.data=u.data.replace(f,h):u.data.indexOf(h)===-1&&(u.data=d?h+u.data:u.data+h)})(it[a],e,r,o),a},eo=(i,e,t)=>i.reduce((r,s,n)=>{let a=e[n];if(a&&a.call){let o=a(t),h=o&&o.props&&o.props.className||/^go/.test(o)&&o;a=h?"."+h:o&&typeof o=="object"?o.props?"":ft(o,""):o===!1?"":o}return r+s+(a??"")},"");function br(i){let e=this||{},t=i.call?i(e.p):i;return Zn(t.unshift?t.raw?eo(t,[].slice.call(arguments,1),e.p):t.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):t,Jn(e.target),e.g,e.o,e.k)}let rn,Cs,Bs;br.bind({g:1});let ct=br.bind({k:1});function to(i,e,t,r){ft.p=e,rn=i,Cs=t,Bs=r}function pt(i,e){let t=this||{};return function(){let r=arguments;function s(n,a){let o=Object.assign({},n),h=o.className||s.className;t.p=Object.assign({theme:Cs&&Cs()},o),t.o=/ *go\d+/.test(h),o.className=br.apply(t,r)+(h?" "+h:"");let u=i;return i[0]&&(u=o.as||i,delete o.as),Bs&&u[0]&&Bs(o),rn(u,o)}return s}}var ro=i=>typeof i=="function",mr=(i,e)=>ro(i)?i(e):i,so=(()=>{let i=0;return()=>(++i).toString()})(),sn=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");i=!e||e.matches}return i}})(),io=20,Ls="default",nn=(i,e)=>{let{toastLimit:t}=i.settings;switch(e.type){case 0:return{...i,toasts:[e.toast,...i.toasts].slice(0,t)};case 1:return{...i,toasts:i.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return nn(i,{type:i.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...i,toasts:i.toasts.map(a=>a.id===s||s===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...i,pausedAt:e.time};case 6:let n=e.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+n}))}}},gr=[],on={toasts:[],pausedAt:void 0,settings:{toastLimit:io}},st={},an=(i,e=Ls)=>{st[e]=nn(st[e]||on,i),gr.forEach(([t,r])=>{t===e&&r(st[e])})},cn=i=>Object.keys(st).forEach(e=>an(i,e)),no=i=>Object.keys(st).find(e=>st[e].toasts.some(t=>t.id===i)),wr=(i=Ls)=>e=>{an(e,i)},oo={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ao=(i={},e=Ls)=>{let[t,r]=q.useState(st[e]||on),s=q.useRef(st[e]);q.useEffect(()=>(s.current!==st[e]&&r(st[e]),gr.push([e,r]),()=>{let a=gr.findIndex(([o])=>o===e);a>-1&&gr.splice(a,1)}),[e]);let n=t.toasts.map(a=>{var o,h,u;return{...i,...i[a.type],...a,removeDelay:a.removeDelay||((o=i[a.type])==null?void 0:o.removeDelay)||(i==null?void 0:i.removeDelay),duration:a.duration||((h=i[a.type])==null?void 0:h.duration)||(i==null?void 0:i.duration)||oo[a.type],style:{...i.style,...(u=i[a.type])==null?void 0:u.style,...a.style}}});return{...t,toasts:n}},co=(i,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...t,id:(t==null?void 0:t.id)||so()}),rr=i=>(e,t)=>{let r=co(e,i,t);return wr(r.toasterId||no(r.id))({type:2,toast:r}),r.id},ke=(i,e)=>rr("blank")(i,e);ke.error=rr("error");ke.success=rr("success");ke.loading=rr("loading");ke.custom=rr("custom");ke.dismiss=(i,e)=>{let t={type:3,toastId:i};e?wr(e)(t):cn(t)};ke.dismissAll=i=>ke.dismiss(void 0,i);ke.remove=(i,e)=>{let t={type:4,toastId:i};e?wr(e)(t):cn(t)};ke.removeAll=i=>ke.remove(void 0,i);ke.promise=(i,e,t)=>{let r=ke.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof i=="function"&&(i=i()),i.then(s=>{let n=e.success?mr(e.success,s):void 0;return n?ke.success(n,{id:r,...t,...t==null?void 0:t.success}):ke.dismiss(r),s}).catch(s=>{let n=e.error?mr(e.error,s):void 0;n?ke.error(n,{id:r,...t,...t==null?void 0:t.error}):ke.dismiss(r)}),i};var lo=1e3,uo=(i,e="default")=>{let{toasts:t,pausedAt:r}=ao(i,e),s=q.useRef(new Map).current,n=q.useCallback((f,p=lo)=>{if(s.has(f))return;let v=setTimeout(()=>{s.delete(f),a({type:4,toastId:f})},p);s.set(f,v)},[]);q.useEffect(()=>{if(r)return;let f=Date.now(),p=t.map(v=>{if(v.duration===1/0)return;let _=(v.duration||0)+v.pauseDuration-(f-v.createdAt);if(_<0){v.visible&&ke.dismiss(v.id);return}return setTimeout(()=>ke.dismiss(v.id,e),_)});return()=>{p.forEach(v=>v&&clearTimeout(v))}},[t,r,e]);let a=q.useCallback(wr(e),[e]),o=q.useCallback(()=>{a({type:5,time:Date.now()})},[a]),h=q.useCallback((f,p)=>{a({type:1,toast:{id:f,height:p}})},[a]),u=q.useCallback(()=>{r&&a({type:6,time:Date.now()})},[r,a]),d=q.useCallback((f,p)=>{let{reverseOrder:v=!1,gutter:_=8,defaultPosition:w}=p||{},y=t.filter(g=>(g.position||w)===(f.position||w)&&g.height),A=y.findIndex(g=>g.id===f.id),m=y.filter((g,E)=>E<A&&g.visible).length;return y.filter(g=>g.visible).slice(...v?[m+1]:[0,m]).reduce((g,E)=>g+(E.height||0)+_,0)},[t]);return q.useEffect(()=>{t.forEach(f=>{if(f.dismissed)n(f.id,f.removeDelay);else{let p=s.get(f.id);p&&(clearTimeout(p),s.delete(f.id))}})},[t,n]),{toasts:t,handlers:{updateHeight:h,startPause:o,endPause:u,calculateOffset:d}}},ho=ct`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,fo=ct`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xo=ct`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,po=pt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ho} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${fo} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xo} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vo=ct`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,go=pt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${vo} 1s linear infinite;
`,mo=ct`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yo=ct`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_o=pt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mo} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yo} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bo=pt("div")`
  position: absolute;
`,wo=pt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Eo=ct`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ao=pt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Eo} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Co=({toast:i})=>{let{icon:e,type:t,iconTheme:r}=i;return e!==void 0?typeof e=="string"?q.createElement(Ao,null,e):e:t==="blank"?null:q.createElement(wo,null,q.createElement(go,{...r}),t!=="loading"&&q.createElement(bo,null,t==="error"?q.createElement(po,{...r}):q.createElement(_o,{...r})))},Bo=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Do=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,ko="0%{opacity:0;} 100%{opacity:1;}",So="0%{opacity:1;} 100%{opacity:0;}",Fo=pt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,jo=pt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,To=(i,e)=>{let t=i.includes("top")?1:-1,[r,s]=sn()?[ko,So]:[Bo(t),Do(t)];return{animation:e?`${ct(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ct(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ro=q.memo(({toast:i,position:e,style:t,children:r})=>{let s=i.height?To(i.position||e||"top-center",i.visible):{opacity:0},n=q.createElement(Co,{toast:i}),a=q.createElement(jo,{...i.ariaProps},mr(i.message,i));return q.createElement(Fo,{className:i.className,style:{...s,...t,...i.style}},typeof r=="function"?r({icon:n,message:a}):q.createElement(q.Fragment,null,n,a))});to(q.createElement);var Po=({id:i,className:e,style:t,onHeightUpdate:r,children:s})=>{let n=q.useCallback(a=>{if(a){let o=()=>{let h=a.getBoundingClientRect().height;r(i,h)};o(),new MutationObserver(o).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[i,r]);return q.createElement("div",{ref:n,className:e,style:t},s)},Io=(i,e)=>{let t=i.includes("top"),r=t?{top:0}:{bottom:0},s=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:sn()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...s}},Oo=br`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ur=16,Uo=({reverseOrder:i,position:e="top-center",toastOptions:t,gutter:r,children:s,toasterId:n,containerStyle:a,containerClassName:o})=>{let{toasts:h,handlers:u}=uo(t,n);return q.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:ur,left:ur,right:ur,bottom:ur,pointerEvents:"none",...a},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},h.map(d=>{let f=d.position||e,p=u.calculateOffset(d,{reverseOrder:i,gutter:r,defaultPosition:e}),v=Io(f,p);return q.createElement(Po,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?Oo:"",style:v},d.type==="custom"?mr(d.message,d):s?s(d):q.createElement(Ro,{toast:d,position:f}))}))},ye=ke;const No=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>se(async()=>{const{default:r}=await Promise.resolve().then(()=>Lt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class zs extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class $o extends zs{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ei extends zs{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ti extends zs{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ds;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Ds||(Ds={}));var Lo=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};class zo{constructor(e,{headers:t={},customFetch:r,region:s=Ds.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=No(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Lo(this,void 0,void 0,function*(){try{const{headers:s,method:n,body:a}=t;let o={},{region:h}=t;h||(h=this.region);const u=new URL(`${this.url}/${e}`);h&&h!=="any"&&(o["x-region"]=h,u.searchParams.set("forceFunctionRegion",h));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(o["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(o["Content-Type"]="application/json",d=JSON.stringify(a)));const f=yield this.fetch(u.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:d}).catch(w=>{throw new $o(w)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new ei(f);if(!f.ok)throw new ti(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),_;return v==="application/json"?_=yield f.json():v==="application/octet-stream"?_=yield f.blob():v==="text/event-stream"?_=f:v==="multipart/form-data"?_=yield f.formData():_=yield f.text(),{data:_,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof ti||s instanceof ei?s.context:void 0}}})}}var $e={},Hs={},Er={},sr={},Ar={},Cr={},Ho=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$t=Ho();const qo=$t.fetch,ln=$t.fetch.bind($t),un=$t.Headers,Wo=$t.Request,Mo=$t.Response,Lt=Object.freeze(Object.defineProperty({__proto__:null,Headers:un,Request:Wo,Response:Mo,default:ln,fetch:qo},Symbol.toStringTag,{value:"Module"})),Vo=qn(Lt);var Br={};Object.defineProperty(Br,"__esModule",{value:!0});let Ko=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Br.default=Ko;var hn=G&&G.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Cr,"__esModule",{value:!0});const Go=hn(Vo),Yo=hn(Br);let Jo=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Go.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var a,o,h,u;let d=null,f=null,p=null,v=n.status,_=n.statusText;if(n.ok){if(this.method!=="HEAD"){const m=await n.text();m===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=m:f=JSON.parse(m))}const y=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),A=(h=n.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&A&&A.length>1&&(p=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,v=406,_="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const y=await n.text();try{d=JSON.parse(y),Array.isArray(d)&&n.status===404&&(f=[],d=null,v=200,_="OK")}catch{n.status===404&&y===""?(v=204,_="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,v=200,_="OK"),d&&this.shouldThrowOnError)throw new Yo.default(d)}return{error:d,data:f,count:p,status:v,statusText:_}});return this.shouldThrowOnError||(s=s.catch(n=>{var a,o,h;return{error:{message:`${(a=n==null?void 0:n.name)!==null&&a!==void 0?a:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(o=n==null?void 0:n.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(h=n==null?void 0:n.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Cr.default=Jo;var Xo=G&&G.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ar,"__esModule",{value:!0});const Qo=Xo(Cr);let Zo=class extends Qo.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:n=s}={}){const a=n?`${n}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:n=!1,format:a="text"}={}){var o;const h=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,n?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${h};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ar.default=Zo;var e0=G&&G.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(sr,"__esModule",{value:!0});const t0=e0(Ar);let r0=class extends t0.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let n="";s==="plain"?n="pl":s==="phrase"?n="ph":s==="websearch"&&(n="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${n}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};sr.default=r0;var s0=G&&G.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Er,"__esModule",{value:!0});const Gt=s0(sr);let i0=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let n=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new Gt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const n="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,h)=>o.concat(Object.keys(h)),[]);if(a.length>0){const o=[...new Set(a)].map(h=>`"${h}"`);this.url.searchParams.set("columns",o.join(","))}}return new Gt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(h.length>0){const u=[...new Set(h)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Gt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Gt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Gt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Er.default=i0;var dn=G&&G.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Hs,"__esModule",{value:!0});const n0=dn(Er),o0=dn(sr);let a0=class fn{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new n0.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new fn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:n}={}){var a;let o;const h=new URL(`${this.url}/rpc/${e}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{h.searchParams.append(f,p)})):(o="POST",u=t);const d=new Headers(this.headers);return n&&d.set("Prefer",`count=${n}`),new o0.default({method:o,url:h,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Hs.default=a0;var zt=G&&G.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty($e,"__esModule",{value:!0});$e.PostgrestError=$e.PostgrestBuilder=$e.PostgrestTransformBuilder=$e.PostgrestFilterBuilder=$e.PostgrestQueryBuilder=$e.PostgrestClient=void 0;const xn=zt(Hs);$e.PostgrestClient=xn.default;const pn=zt(Er);$e.PostgrestQueryBuilder=pn.default;const vn=zt(sr);$e.PostgrestFilterBuilder=vn.default;const gn=zt(Ar);$e.PostgrestTransformBuilder=gn.default;const mn=zt(Cr);$e.PostgrestBuilder=mn.default;const yn=zt(Br);$e.PostgrestError=yn.default;var c0=$e.default={PostgrestClient:xn.default,PostgrestQueryBuilder:pn.default,PostgrestFilterBuilder:vn.default,PostgrestTransformBuilder:gn.default,PostgrestBuilder:mn.default,PostgrestError:yn.default};const{PostgrestClient:l0,PostgrestQueryBuilder:wl,PostgrestFilterBuilder:El,PostgrestTransformBuilder:Al,PostgrestBuilder:Cl,PostgrestError:Bl}=c0;class u0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const h0="2.15.4",d0=`realtime-js/${h0}`,f0="1.0.0",ks=1e4,x0=1e3,p0=100;var Xt;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Xt||(Xt={}));var Be;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Be||(Be={}));var Ye;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Ye||(Ye={}));var Ss;(function(i){i.websocket="websocket"})(Ss||(Ss={}));var Et;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Et||(Et={}));class v0{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),n=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const h=r.decode(e.slice(a,a+n));a=a+n;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:h,payload:u}}}class _n{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var me;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(me||(me={}));const ri=(i,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((n,a)=>(n[a]=g0(a,i,e,s),n),{})},g0=(i,e,t,r)=>{const s=e.find(o=>o.name===i),n=s==null?void 0:s.type,a=t[i];return n&&!r.includes(n)?bn(n,a):Fs(a)},bn=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return b0(e,t)}switch(i){case me.bool:return m0(e);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return y0(e);case me.json:case me.jsonb:return _0(e);case me.timestamp:return w0(e);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return Fs(e);default:return Fs(e)}},Fs=i=>i,m0=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},y0=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},_0=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},b0=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,r=i[t];if(i[0]==="{"&&r==="}"){let n;const a=i.slice(1,t);try{n=JSON.parse("["+a+"]")}catch{n=a?a.split(","):[]}return n.map(o=>bn(e,o))}return i},w0=i=>typeof i=="string"?i.replace(" ","T"):i,wn=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Pr{constructor(e,t,r={},s=ks){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var si;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(si||(si={}));class Qt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qt.syncState(this.state,s,n,a),this.pendingDiffs.forEach(h=>{this.state=Qt.syncDiff(this.state,h,n,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:n,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Qt.syncDiff(this.state,s,n,a),o())}),this.onJoin((s,n,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:n,newPresences:a})}),this.onLeave((s,n,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:n,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const n=this.cloneDeep(e),a=this.transformState(t),o={},h={};return this.map(n,(u,d)=>{a[u]||(h[u]=d)}),this.map(a,(u,d)=>{const f=n[u];if(f){const p=d.map(y=>y.presence_ref),v=f.map(y=>y.presence_ref),_=d.filter(y=>v.indexOf(y.presence_ref)<0),w=f.filter(y=>p.indexOf(y.presence_ref)<0);_.length>0&&(o[u]=_),w.length>0&&(h[u]=w)}else o[u]=d}),this.syncDiff(n,{joins:o,leaves:h},r,s)}static syncDiff(e,t,r,s){const{joins:n,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(n,(o,h)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(h),d.length>0){const f=e[o].map(v=>v.presence_ref),p=d.filter(v=>f.indexOf(v.presence_ref)<0);e[o].unshift(...p)}r(o,d,h)}),this.map(a,(o,h)=>{let u=e[o];if(!u)return;const d=h.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=u,s(o,u,h),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ii;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(ii||(ii={}));var Zt;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Zt||(Zt={}));var at;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(at||(at={}));class qs{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Pr(this,Ye.join,this.params,this.timeout),this.rejoinTimer=new _n(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ye.reply,{},(s,n)=>{this._trigger(this._replyEventName(n),s)}),this.presence=new Qt(this),this.broadcastEndpointURL=wn(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s,n;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:a,presence:o,private:h}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Zt.PRESENCE]&&this.bindings[Zt.PRESENCE].length>0||((n=this.params.config.presence)===null||n===void 0?void 0:n.enabled)===!0,f={},p={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:h};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(at.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(at.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var _;if(this.socket.setAuth(),v===void 0){e==null||e(at.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,y=(_=w==null?void 0:w.length)!==null&&_!==void 0?_:0,A=[];for(let m=0;m<y;m++){const g=w[m],{filter:{event:E,schema:k,table:D,filter:F}}=g,P=v&&v[m];if(P&&P.event===E&&P.schema===k&&P.table===D&&P.filter===F)A.push(Object.assign(Object.assign({},g),{id:P.id}));else{this.unsubscribe(),this.state=Be.errored,e==null||e(at.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(at.SUBSCRIBED);return}}).receive("error",v=>{this.state=Be.errored,e==null||e(at.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(at.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Be.joined&&e===Zt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:a}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var a,o,h;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||h===void 0)&&h.ack)&&n("ok"),u.receive("ok",()=>n("ok")),u.receive("error",()=>n("error")),u.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Be.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ye.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Pr(this,Ye.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Be.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,n=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(n),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Pr(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>p0){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,n;const a=e.toLocaleLowerCase(),{close:o,error:h,leave:u,join:d}=Ye;if(r&&[o,h,u,d].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var _,w,y;return((_=v.filter)===null||_===void 0?void 0:_.event)==="*"||((y=(w=v.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(v=>v.callback(p,r)):(n=this.bindings[a])===null||n===void 0||n.filter(v=>{var _,w,y,A,m,g;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const E=v.id,k=(_=v.filter)===null||_===void 0?void 0:_.event;return E&&((w=t.ids)===null||w===void 0?void 0:w.includes(E))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(m=(A=v==null?void 0:v.filter)===null||A===void 0?void 0:A.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return E==="*"||E===((g=t==null?void 0:t.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof p=="object"&&"ids"in p){const _=p.data,{schema:w,table:y,commit_timestamp:A,type:m,errors:g}=_;p=Object.assign(Object.assign({},{schema:w,table:y,commit_timestamp:A,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(_))}v.callback(p,r)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var n;return!(((n=s.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===r&&qs.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ye.close,{},e)}_onError(e){this._on(Ye.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ri(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ri(e.columns,e.old_record)),t}}const Ir=()=>{},hr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},E0=[1e3,2e3,5e3,1e4],A0=1e4,C0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class B0{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ks,this.transport=null,this.heartbeatIntervalMs=hr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ir,this.ref=0,this.reconnectTimer=null,this.logger=Ir,this.conn=null,this.sendBuffer=[],this.serializer=new v0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let n;return s?n=s:typeof fetch>"u"?n=(...a)=>se(async()=>{const{default:o}=await Promise.resolve().then(()=>Lt);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):n=fetch,(...a)=>n(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ss.websocket}`,this.httpEndpoint=wn(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=u0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:f0}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Xt.connecting:return Et.Connecting;case Xt.open:return Et.Open;case Xt.closing:return Et.Closing;default:return Et.Closed}}isConnected(){return this.connectionState()===Et.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(n=>n.topic===r);if(s)return s;{const n=new qs(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:r,payload:s,ref:n}=e,a=()=>{this.encode(e,o=>{var h;(h=this.conn)===null||h===void 0||h.send(o)})};this.log("push",`${t} ${r} (${n})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(x0,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},hr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:n,ref:a}=t,o=a?`(${a})`:"",h=n.status||"";this.log("receive",`${h} ${r} ${s} ${o}`.trim(),n),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,n,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ye.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([C0],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:d0};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ye.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new _n(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,n,a,o,h,u,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ks,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:hr.HEARTBEAT_INTERVAL,this.worker=(n=e==null?void 0:e.worker)!==null&&n!==void 0?n:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:Ir,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:f=>E0[f-1]||A0,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ws extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function De(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class D0 extends Ws{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class js extends Ws{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var k0=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};const En=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>se(async()=>{const{default:r}=await Promise.resolve().then(()=>Lt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},S0=()=>k0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield se(()=>Promise.resolve().then(()=>Lt),void 0)).Response:Response}),Ts=i=>{if(Array.isArray(i))return i.map(t=>Ts(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[s]=Ts(r)}),e},F0=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var Ct=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};const Or=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),j0=(i,e,t)=>Ct(void 0,void 0,void 0,function*(){const r=yield S0();i instanceof r&&!(t!=null&&t.noResolveJson)?i.json().then(s=>{const n=i.status||500,a=(s==null?void 0:s.statusCode)||n+"";e(new D0(Or(s),n,a))}).catch(s=>{e(new js(Or(s),s))}):e(new js(Or(i),i))}),T0=(i,e,t,r)=>{const s={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!r?s:(F0(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function ir(i,e,t,r,s,n){return Ct(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(t,T0(e,r,s,n)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>a(h)).catch(h=>j0(h,o,r))})})}function yr(i,e,t,r){return Ct(this,void 0,void 0,function*(){return ir(i,"GET",e,t,r)})}function tt(i,e,t,r,s){return Ct(this,void 0,void 0,function*(){return ir(i,"POST",e,r,s,t)})}function Rs(i,e,t,r,s){return Ct(this,void 0,void 0,function*(){return ir(i,"PUT",e,r,s,t)})}function R0(i,e,t,r){return Ct(this,void 0,void 0,function*(){return ir(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function An(i,e,t,r,s){return Ct(this,void 0,void 0,function*(){return ir(i,"DELETE",e,r,s,t)})}var Re=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};const P0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ni={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class I0{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=En(s)}uploadOrUpdate(e,t,r,s){return Re(this,void 0,void 0,function*(){try{let n;const a=Object.assign(Object.assign({},ni),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const h=a.metadata;typeof Blob<"u"&&r instanceof Blob?(n=new FormData,n.append("cacheControl",a.cacheControl),h&&n.append("metadata",this.encodeMetadata(h)),n.append("",r)):typeof FormData<"u"&&r instanceof FormData?(n=r,n.append("cacheControl",a.cacheControl),h&&n.append("metadata",this.encodeMetadata(h))):(n=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,h&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),f=yield(e=="PUT"?Rs:tt)(this.fetch,`${this.url}/object/${d}`,n,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}upload(e,t,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Re(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),a=this._getFinalPath(n),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let h;const u=Object.assign({upsert:ni.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",u.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",u.cacheControl)):(h=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Rs(this.fetch,o.toString(),h,{headers:d});return{data:{path:n,fullPath:f.Key},error:null}}catch(h){if(De(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,t){return Re(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const n=yield tt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+n.url),o=a.searchParams.get("token");if(!o)throw new Ws("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}update(e,t,r){return Re(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Re(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}copy(e,t,r){return Re(this,void 0,void 0,function*(){try{return{data:{path:(yield tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return Re(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),n=yield tt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${a}`)},{data:n,error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Re(this,void 0,void 0,function*(){try{const s=yield tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),n=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${n}`):null})),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}download(e,t){return Re(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield yr(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(De(o))return{data:null,error:o};throw o}})}info(e){return Re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield yr(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ts(r),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}exists(e){return Re(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield R0(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(De(r)&&r instanceof js){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],n=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";n!==""&&s.push(n);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});h!==""&&s.push(h);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Re(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(De(t))return{data:null,error:t};throw t}})}list(e,t,r){return Re(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},P0),t),{prefix:e||""});return{data:yield tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}listV2(e,t){return Re(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield tt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const O0="2.11.0",U0={"X-Client-Info":`storage-js/${O0}`};var Ft=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};class N0{constructor(e,t={},r,s){const n=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(n.hostname)&&!n.hostname.includes("storage.supabase.")&&(n.hostname=n.hostname.replace("supabase.","storage.supabase.")),this.url=n.href,this.headers=Object.assign(Object.assign({},U0),t),this.fetch=En(r)}listBuckets(){return Ft(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(De(e))return{data:null,error:e};throw e}})}getBucket(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield yr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(De(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ft(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ft(this,void 0,void 0,function*(){try{return{data:yield Rs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(De(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ft(this,void 0,void 0,function*(){try{return{data:yield An(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(De(t))return{data:null,error:t};throw t}})}}class $0 extends N0{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new I0(this.url,this.headers,e,this.fetch)}}const L0="2.56.1";let Jt="";typeof Deno<"u"?Jt="deno":typeof document<"u"?Jt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jt="react-native":Jt="node";const z0={"X-Client-Info":`supabase-js-${Jt}/${L0}`},H0={headers:z0},q0={schema:"public"},W0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M0={};var V0=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};const K0=i=>{let e;return i?e=i:typeof fetch>"u"?e=ln:e=fetch,(...t)=>e(...t)},G0=()=>typeof Headers>"u"?un:Headers,Y0=(i,e,t)=>{const r=K0(t),s=G0();return(n,a)=>V0(void 0,void 0,void 0,function*(){var o;const h=(o=yield e())!==null&&o!==void 0?o:i;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",i),u.has("Authorization")||u.set("Authorization",`Bearer ${h}`),r(n,Object.assign(Object.assign({},a),{headers:u}))})};var J0=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};function X0(i){return i.endsWith("/")?i:i+"/"}function Q0(i,e){var t,r;const{db:s,auth:n,realtime:a,global:o}=i,{db:h,auth:u,realtime:d,global:f}=e,p={db:Object.assign(Object.assign({},h),s),auth:Object.assign(Object.assign({},u),n),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>J0(this,void 0,void 0,function*(){return""})};return i.accessToken?p.accessToken=i.accessToken:delete p.accessToken,p}const Cn="2.71.1",Ot=30*1e3,Ps=3,Ur=Ps*Ot,Z0="http://localhost:9999",ea="supabase.auth.token",ta={"X-Client-Info":`gotrue-js/${Cn}`},Is="X-Supabase-Api-Version",Bn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ra=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sa=10*60*1e3;class Ms extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Z(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class ia extends Ms{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function na(i){return Z(i)&&i.name==="AuthApiError"}class Dn extends Ms{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class vt extends Ms{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class dt extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oa(i){return Z(i)&&i.name==="AuthSessionMissingError"}class dr extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fr extends vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xr extends vt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aa(i){return Z(i)&&i.name==="AuthImplicitGrantRedirectError"}class oi extends vt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Os extends vt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Nr(i){return Z(i)&&i.name==="AuthRetryableFetchError"}class ai extends vt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Us extends vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const _r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ci=` 	
\r=`.split(""),ca=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<ci.length;e+=1)i[ci[e].charCodeAt(0)]=-2;for(let e=0;e<_r.length;e+=1)i[_r[e].charCodeAt(0)]=e;return i})();function li(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(_r[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(_r[r]),e.queuedBits-=6}}function kn(i,e,t){const r=ca[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function ui(i){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},n=a=>{ha(a,r,t)};for(let a=0;a<i.length;a+=1)kn(i.charCodeAt(a),s,n);return e.join("")}function la(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function ua(i,e){for(let t=0;t<i.length;t+=1){let r=i.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(i.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}la(r,e)}}function ha(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let r=1;r<6;r+=1)if(!(i>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function da(i){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<i.length;s+=1)kn(i.charCodeAt(s),t,r);return new Uint8Array(e)}function fa(i){const e=[];return ua(i,t=>e.push(t)),new Uint8Array(e)}function xa(i){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return i.forEach(s=>li(s,t,r)),li(null,t,r),e.join("")}function pa(i){return Math.round(Date.now()/1e3)+i}function va(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const Ge=()=>typeof window<"u"&&typeof document<"u",_t={tested:!1,writable:!1},Sn=()=>{if(!Ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_t.tested)return _t.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),_t.tested=!0,_t.writable=!0}catch{_t.tested=!0,_t.writable=!1}return _t.writable};function ga(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,n)=>{e[n]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Fn=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...t)=>se(async()=>{const{default:r}=await Promise.resolve().then(()=>Lt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ma=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Ut=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},bt=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ht=async(i,e)=>{await i.removeItem(e)};class Dr{constructor(){this.promise=new Dr.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Dr.promiseConstructor=Promise;function $r(i){const e=i.split(".");if(e.length!==3)throw new Us("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ra.test(e[r]))throw new Us("JWT not in base64url format");return{header:JSON.parse(ui(e[0])),payload:JSON.parse(ui(e[1])),signature:da(e[2]),raw:{header:e[0],payload:e[1]}}}async function ya(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function _a(i,e){return new Promise((r,s)=>{(async()=>{for(let n=0;n<1/0;n++)try{const a=await i(n);if(!e(n,null,a)){r(a);return}}catch(a){if(!e(n,a)){s(a);return}}})()})}function ba(i){return("0"+i.toString(16)).substr(-2)}function wa(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let n=0;n<56;n++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,ba).join("")}async function Ea(i){const t=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(n=>String.fromCharCode(n)).join("")}async function Aa(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await Ea(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function jt(i,e,t=!1){const r=wa();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Ut(i,`${e}-code-verifier`,s);const n=await Aa(r);return[n,r===n?"plain":"s256"]}const Ca=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ba(i){const e=i.headers.get(Is);if(!e||!e.match(Ca))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Da(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function ka(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sa=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tt(i){if(!Sa.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lr(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hi(i){return JSON.parse(JSON.stringify(i))}var Fa=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(t[r[s]]=i[r[s]]);return t};const wt=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),ja=[502,503,504];async function di(i){var e;if(!ma(i))throw new Os(wt(i),0);if(ja.includes(i.status))throw new Os(wt(i),i.status);let t;try{t=await i.json()}catch(n){throw new Dn(wt(n),n)}let r;const s=Ba(i);if(s&&s.getTime()>=Bn["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new ai(wt(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new dt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0))throw new ai(wt(t),i.status,t.weak_password.reasons);throw new ia(wt(t),i.status||500,r)}const Ta=(i,e,t,r)=>{const s={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function te(i,e,t,r){var s;const n=Object.assign({},r==null?void 0:r.headers);n[Is]||(n[Is]=Bn["2024-01-01"].name),r!=null&&r.jwt&&(n.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",h=await Ra(i,e,t+o,{headers:n,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function Ra(i,e,t,r,s,n){const a=Ta(e,r,s,n);let o;try{o=await i(t,Object.assign({},a))}catch(h){throw console.error(h),new Os(wt(h),0)}if(o.ok||await di(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(h){await di(h)}}function ot(i){var e;let t=null;Ua(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=pa(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:r},error:null}}function fi(i){const e=ot(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function xt(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function Pa(i){return{data:i,error:null}}function Ia(i){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:n}=i,a=Fa(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:n},h=Object.assign({},a);return{data:{properties:o,user:h},error:null}}function Oa(i){return i}function Ua(i){return i.access_token&&i.refresh_token&&i.expires_in}const zr=["global","local","others"];var Na=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(i);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(i,r[s])&&(t[r[s]]=i[r[s]]);return t};class $a{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Fn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=zr[0]){if(zr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zr.join(", ")}`);try{return await te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:xt})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Na(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ia,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Z(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:xt})}catch(t){if(Z(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,n,a,o,h;try{const u={nextPage:null,lastPage:0,total:0},d=await te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(n=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:""},xform:Oa});if(d.error)throw d.error;const f=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(h=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&h!==void 0?h:[];return v.length>0&&(v.forEach(_=>{const w=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(_.split(";")[1].split("=")[1]);u[`${y}Page`]=w}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Z(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Tt(e);try{return await te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:xt})}catch(t){if(Z(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Tt(e);try{return await te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:xt})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Tt(e);try{return await te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:xt})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Tt(e.userId);try{const{data:t,error:r}=await te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Tt(e.userId),Tt(e.id);try{return{data:await te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}}}function xi(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}function La(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Rt={debug:!!(globalThis&&Sn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jn extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class za extends jn{}async function Ha(i,e,t){Rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Rt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,s.name);try{return await t()}finally{Rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,s.name)}}else{if(e===0)throw Rt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new za(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Rt.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}La();const qa={url:Z0,storageKey:ea,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ta,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function pi(i,e,t){return await t()}const Pt={};class tr{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tr.nextInstanceID,tr.nextInstanceID+=1,this.instanceID>0&&Ge()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},qa),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new $a({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Fn(s.fetch),this.lock=s.lock||pi,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ge()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Ha:this.lock=pi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Sn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xi(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=xi(this.memoryStorage)),Ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Pt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Pt[this.storageKey]=Object.assign(Object.assign({},Pt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Pt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Pt[this.storageKey]=Object.assign(Object.assign({},Pt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Cn}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ga(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Ge()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:n}=await this._getSessionFromURL(t,r);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),aa(n)){const h=(e=n.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Z(t)?{error:t}:{error:new Dn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const n=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ot}),{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const h=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:u,session:h},error:null}}catch(n){if(Z(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var t,r,s;try{let n;if("email"in e){const{email:d,password:f,options:p}=e;let v=null,_=null;this.flowType==="pkce"&&([v,_]=await jt(this.storage,this.storageKey)),n=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:v,code_challenge_method:_},xform:ot})}else if("phone"in e){const{phone:d,password:f,options:p}=e;n=await te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ot})}else throw new fr("You must provide either an email or phone number and a password");const{data:a,error:o}=n;if(o||!a)return{data:{user:null,session:null},error:o};const h=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:u,session:h},error:null}}catch(n){if(Z(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:a,options:o}=e;t=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:fi})}else if("phone"in e){const{phone:n,password:a,options:o}=e;t=await te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:fi})}else throw new fr("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new dr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,n,a,o,h,u,d,f,p,v;let _,w;if("message"in e)_=e.message,w=e.signature;else{const{chain:y,wallet:A,statement:m,options:g}=e;let E;if(Ge())if(typeof A=="object")E=A;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))E=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=A}const k=new URL((t=g==null?void 0:g.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const D=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let F;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")F=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)F=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)_=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),w=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${k.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=g==null?void 0:g.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((n=g==null?void 0:g.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((h=g==null?void 0:g.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((f=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...g.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const D=await E.signMessage(new TextEncoder().encode(_),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=D}}try{const{data:y,error:A}=await te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:xa(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ot});if(A)throw A;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new dr}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:A})}catch(y){if(Z(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const t=await bt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:n,error:a}=await te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ot});if(await ht(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new dr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:s??null}),error:a})}catch(n){if(Z(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:n,nonce:a}=e,o=await te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:n,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ot}),{data:h,error:u}=o;return u?{data:{user:null,session:null},error:u}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new dr}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:u})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,n,a;try{if("email"in e){const{email:o,options:h}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await jt(this.storage,this.storageKey));const{error:f}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:h}=e,{data:u,error:d}=await te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new fr("You must provide either an email or phone number.")}catch(o){if(Z(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,n;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,n=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:s,xform:ot});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const h=a.session,u=a.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:u,session:h},error:null}}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let n=null,a=null;return this.flowType==="pkce"&&([n,a]=await jt(this.storage,this.storageKey)),await te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:a}),headers:this.headers,xform:Pa})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new dt;const{error:s}=await te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:n}=e,{error:a}=await te(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:n}=e,{data:a,error:o}=await te(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new fr("You must provide either an email or phone number and a type")}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await bt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ur:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await bt(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Lr()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,u,d))})}return{data:{session:e},error:null}}const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:xt}):await this._useSession(async t=>{var r,s,n;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new dt}:await te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0,xform:xt})})}catch(t){if(Z(t))return oa(t)&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:n}=r;if(n)throw n;if(!s.session)throw new dt;const a=s.session;let o=null,h=null;this.flowType==="pkce"&&e.email!=null&&([o,h]=await jt(this.storage,this.storageKey));const{data:u,error:d}=await te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:h}),jwt:a.access_token,xform:xt});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new dt;const t=Date.now()/1e3;let r=t,s=!0,n=null;const{payload:a}=$r(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!o)return{data:{user:null,session:null},error:null};n=o}else{const{data:o,error:h}=await this._getUser(e.access_token);if(h)throw h;n={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(t){if(Z(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new dt;const{session:s,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ge())throw new xr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new oi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oi("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:n,refresh_token:a,expires_in:o,expires_at:h,token_type:u}=e;if(!n||!o||!a||!u)throw new xr("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let p=d+f;h&&(p=parseInt(h));const v=p-d;v*1e3<=Ot&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const _=p-f;d-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,d):d-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,p,d);const{data:w,error:y}=await this._getUser(n);if(y)throw y;const A={provider_token:r,provider_refresh_token:s,access_token:n,expires_in:f,expires_at:p,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(r){if(Z(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await bt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{error:n};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(na(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=va(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:n},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await jt(this.storage,this.storageKey,!0));try{return await te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(Z(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async n=>{var a,o,h,u,d;const{data:f,error:p}=n;if(p)throw p;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await te(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ge()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Z(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)throw a;return await te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await _a(async s=>(s>0&&await ya(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ot})),(s,n)=>{const a=200*Math.pow(2,s);return n&&Nr(n)&&Date.now()+a-r<Ot})}catch(r){if(this._debug(t,"error",r),Z(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ge()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await bt(this.storage,this.storageKey);if(s&&this.userStorage){let a=await bt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Ut(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Lr()}else if(s&&!s.user&&!s.user){const a=await bt(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await ht(this.storage,this.storageKey+"-user"),await Ut(this.storage,this.storageKey,s)):s.user=Lr()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ur;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${Ur}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Nr(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Dr;const{data:n,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!n.session)throw new dt;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(this._debug(s,"error",n),Z(n)){const a={session:null,error:n};return Nr(n)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(n),n}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(h){n.push(h)}});if(await Promise.all(a),n.length>0){for(let o=0;o<n.length;o+=1)console.error(n[o]);throw n[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ut(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const n=hi(s);await Ut(this.storage,this.storageKey,n)}else{const s=hi(t);await Ut(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ht(this.storage,this.storageKey),await ht(this.storage,this.storageKey+"-code-verifier"),await ht(this.storage,this.storageKey+"-user"),this.userStorage&&await ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ot);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ot);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ot}ms, refresh threshold is ${Ps} ticks`),s<=Ps&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jn)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[n,a]=await jt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const n=new URLSearchParams(r.queryParams);s.push(n.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:u}=await te(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(t){if(Z(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;if(n)return{data:null,error:n};const{data:a,error:o}=await te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(Z(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:n}=t;return n?{data:null,error:n}:await te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Z(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),n=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:n}=e;if(n)return{data:null,error:n};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=$r(s.access_token);let o=null;a.aal&&(o=a.aal);let h=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:h,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+sa>s)return r;const{data:n,error:a}=await te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!n.keys||n.keys.length===0||(this.jwks=n,this.jwks_cached_at=s,r=n.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:v,error:_}=await this.getSession();if(_||!v.session)return{data:null,error:_};r=v.session.access_token}const{header:s,payload:n,signature:a,raw:{header:o,payload:h}}=$r(r);t!=null&&t.allowExpired||Da(n.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:n,header:s,signature:a},error:null}}const d=ka(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,fa(`${o}.${h}`)))throw new Us("Invalid JWT signature");return{data:{claims:n,header:s,signature:a},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}}tr.nextInstanceID=0;const Wa=tr;class Ma extends Wa{constructor(e){super(e)}}var Va=function(i,e,t,r){function s(n){return n instanceof t?n:new t(function(a){a(n)})}return new(t||(t=Promise))(function(n,a){function o(d){try{u(r.next(d))}catch(f){a(f)}}function h(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){d.done?n(d.value):s(d.value).then(o,h)}u((r=r.apply(i,e||[])).next())})};class Ka{constructor(e,t,r){var s,n,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=X0(e),h=new URL(o);this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const u=`sb-${h.hostname.split(".")[0]}-auth-token`,d={db:q0,realtime:M0,auth:Object.assign(Object.assign({},W0),{storageKey:u}),global:H0},f=Q0(r??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(n=f.global.headers)!==null&&n!==void 0?n:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=Y0(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new l0(new URL("rest/v1",h).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new $0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new zo(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Va(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:n,flowType:a,lock:o,debug:h},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ma({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:h,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new B0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ga=(i,e,t)=>new Ka(i,e,t);function Ya(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Ya()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ja="https://your-project.supabase.co",Xa="your-supabase-anon-key",_e=Ga(Ja,Xa,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}}});var Tn={exports:{}},Hr={exports:{}},vi;function ne(){return vi||(vi=1,function(i,e){(function(t,r){i.exports=r()})(G,function(){var t=t||function(r,s){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof G<"u"&&G.crypto&&(n=G.crypto),!n&&typeof Mn=="function")try{n=Vn}catch{}var a=function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function m(){}return function(g){var E;return m.prototype=g,E=new m,m.prototype=null,E}}(),h={},u=h.lib={},d=u.Base=function(){return{extend:function(m){var g=o(this);return m&&g.mixIn(m),(!g.hasOwnProperty("init")||this.init===g.init)&&(g.init=function(){g.$super.init.apply(this,arguments)}),g.init.prototype=g,g.$super=this,g},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var g in m)m.hasOwnProperty(g)&&(this[g]=m[g]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=u.WordArray=d.extend({init:function(m,g){m=this.words=m||[],g!=s?this.sigBytes=g:this.sigBytes=m.length*4},toString:function(m){return(m||v).stringify(this)},concat:function(m){var g=this.words,E=m.words,k=this.sigBytes,D=m.sigBytes;if(this.clamp(),k%4)for(var F=0;F<D;F++){var P=E[F>>>2]>>>24-F%4*8&255;g[k+F>>>2]|=P<<24-(k+F)%4*8}else for(var H=0;H<D;H+=4)g[k+H>>>2]=E[H>>>2];return this.sigBytes+=D,this},clamp:function(){var m=this.words,g=this.sigBytes;m[g>>>2]&=4294967295<<32-g%4*8,m.length=r.ceil(g/4)},clone:function(){var m=d.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var g=[],E=0;E<m;E+=4)g.push(a());return new f.init(g,m)}}),p=h.enc={},v=p.Hex={stringify:function(m){for(var g=m.words,E=m.sigBytes,k=[],D=0;D<E;D++){var F=g[D>>>2]>>>24-D%4*8&255;k.push((F>>>4).toString(16)),k.push((F&15).toString(16))}return k.join("")},parse:function(m){for(var g=m.length,E=[],k=0;k<g;k+=2)E[k>>>3]|=parseInt(m.substr(k,2),16)<<24-k%8*4;return new f.init(E,g/2)}},_=p.Latin1={stringify:function(m){for(var g=m.words,E=m.sigBytes,k=[],D=0;D<E;D++){var F=g[D>>>2]>>>24-D%4*8&255;k.push(String.fromCharCode(F))}return k.join("")},parse:function(m){for(var g=m.length,E=[],k=0;k<g;k++)E[k>>>2]|=(m.charCodeAt(k)&255)<<24-k%4*8;return new f.init(E,g)}},w=p.Utf8={stringify:function(m){try{return decodeURIComponent(escape(_.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return _.parse(unescape(encodeURIComponent(m)))}},y=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=w.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var g,E=this._data,k=E.words,D=E.sigBytes,F=this.blockSize,P=F*4,H=D/P;m?H=r.ceil(H):H=r.max((H|0)-this._minBufferSize,0);var S=H*F,R=r.min(S*4,D);if(S){for(var N=0;N<S;N+=F)this._doProcessBlock(k,N);g=k.splice(0,S),E.sigBytes-=R}return new f.init(g,R)},clone:function(){var m=d.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});u.Hasher=y.extend({cfg:d.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var g=this._doFinalize();return g},blockSize:16,_createHelper:function(m){return function(g,E){return new m.init(E).finalize(g)}},_createHmacHelper:function(m){return function(g,E){return new A.HMAC.init(m,E).finalize(g)}}});var A=h.algo={};return h}(Math);return t})}(Hr)),Hr.exports}var qr={exports:{}},gi;function kr(){return gi||(gi=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(r){var s=t,n=s.lib,a=n.Base,o=n.WordArray,h=s.x64={};h.Word=a.extend({init:function(u,d){this.high=u,this.low=d}}),h.WordArray=a.extend({init:function(u,d){u=this.words=u||[],d!=r?this.sigBytes=d:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,d=u.length,f=[],p=0;p<d;p++){var v=u[p];f.push(v.high),f.push(v.low)}return o.create(f,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),d=u.words=this.words.slice(0),f=d.length,p=0;p<f;p++)d[p]=d[p].clone();return u}})}(),t})}(qr)),qr.exports}var Wr={exports:{}},mi;function Qa(){return mi||(mi=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(){if(typeof ArrayBuffer=="function"){var r=t,s=r.lib,n=s.WordArray,a=n.init,o=n.init=function(h){if(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),(h instanceof Int8Array||typeof Uint8ClampedArray<"u"&&h instanceof Uint8ClampedArray||h instanceof Int16Array||h instanceof Uint16Array||h instanceof Int32Array||h instanceof Uint32Array||h instanceof Float32Array||h instanceof Float64Array)&&(h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength)),h instanceof Uint8Array){for(var u=h.byteLength,d=[],f=0;f<u;f++)d[f>>>2]|=h[f]<<24-f%4*8;a.call(this,d,u)}else a.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})}(Wr)),Wr.exports}var Mr={exports:{}},yi;function Za(){return yi||(yi=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(){var r=t,s=r.lib,n=s.WordArray,a=r.enc;a.Utf16=a.Utf16BE={stringify:function(h){for(var u=h.words,d=h.sigBytes,f=[],p=0;p<d;p+=2){var v=u[p>>>2]>>>16-p%4*8&65535;f.push(String.fromCharCode(v))}return f.join("")},parse:function(h){for(var u=h.length,d=[],f=0;f<u;f++)d[f>>>1]|=h.charCodeAt(f)<<16-f%2*16;return n.create(d,u*2)}},a.Utf16LE={stringify:function(h){for(var u=h.words,d=h.sigBytes,f=[],p=0;p<d;p+=2){var v=o(u[p>>>2]>>>16-p%4*8&65535);f.push(String.fromCharCode(v))}return f.join("")},parse:function(h){for(var u=h.length,d=[],f=0;f<u;f++)d[f>>>1]|=o(h.charCodeAt(f)<<16-f%2*16);return n.create(d,u*2)}};function o(h){return h<<8&4278255360|h>>>8&16711935}}(),t.enc.Utf16})}(Mr)),Mr.exports}var Vr={exports:{}},_i;function Bt(){return _i||(_i=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(){var r=t,s=r.lib,n=s.WordArray,a=r.enc;a.Base64={stringify:function(h){var u=h.words,d=h.sigBytes,f=this._map;h.clamp();for(var p=[],v=0;v<d;v+=3)for(var _=u[v>>>2]>>>24-v%4*8&255,w=u[v+1>>>2]>>>24-(v+1)%4*8&255,y=u[v+2>>>2]>>>24-(v+2)%4*8&255,A=_<<16|w<<8|y,m=0;m<4&&v+m*.75<d;m++)p.push(f.charAt(A>>>6*(3-m)&63));var g=f.charAt(64);if(g)for(;p.length%4;)p.push(g);return p.join("")},parse:function(h){var u=h.length,d=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<d.length;p++)f[d.charCodeAt(p)]=p}var v=d.charAt(64);if(v){var _=h.indexOf(v);_!==-1&&(u=_)}return o(h,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(h,u,d){for(var f=[],p=0,v=0;v<u;v++)if(v%4){var _=d[h.charCodeAt(v-1)]<<v%4*2,w=d[h.charCodeAt(v)]>>>6-v%4*2,y=_|w;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}}(),t.enc.Base64})}(Vr)),Vr.exports}var Kr={exports:{}},bi;function ec(){return bi||(bi=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(){var r=t,s=r.lib,n=s.WordArray,a=r.enc;a.Base64url={stringify:function(h,u){u===void 0&&(u=!0);var d=h.words,f=h.sigBytes,p=u?this._safe_map:this._map;h.clamp();for(var v=[],_=0;_<f;_+=3)for(var w=d[_>>>2]>>>24-_%4*8&255,y=d[_+1>>>2]>>>24-(_+1)%4*8&255,A=d[_+2>>>2]>>>24-(_+2)%4*8&255,m=w<<16|y<<8|A,g=0;g<4&&_+g*.75<f;g++)v.push(p.charAt(m>>>6*(3-g)&63));var E=p.charAt(64);if(E)for(;v.length%4;)v.push(E);return v.join("")},parse:function(h,u){u===void 0&&(u=!0);var d=h.length,f=u?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var v=0;v<f.length;v++)p[f.charCodeAt(v)]=v}var _=f.charAt(64);if(_){var w=h.indexOf(_);w!==-1&&(d=w)}return o(h,d,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function o(h,u,d){for(var f=[],p=0,v=0;v<u;v++)if(v%4){var _=d[h.charCodeAt(v-1)]<<v%4*2,w=d[h.charCodeAt(v)]>>>6-v%4*2,y=_|w;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}}(),t.enc.Base64url})}(Kr)),Kr.exports}var Gr={exports:{}},wi;function Dt(){return wi||(wi=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(r){var s=t,n=s.lib,a=n.WordArray,o=n.Hasher,h=s.algo,u=[];(function(){for(var w=0;w<64;w++)u[w]=r.abs(r.sin(w+1))*4294967296|0})();var d=h.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(w,y){for(var A=0;A<16;A++){var m=y+A,g=w[m];w[m]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var E=this._hash.words,k=w[y+0],D=w[y+1],F=w[y+2],P=w[y+3],H=w[y+4],S=w[y+5],R=w[y+6],N=w[y+7],O=w[y+8],V=w[y+9],K=w[y+10],J=w[y+11],ue=w[y+12],ee=w[y+13],ce=w[y+14],ie=w[y+15],j=E[0],I=E[1],$=E[2],L=E[3];j=f(j,I,$,L,k,7,u[0]),L=f(L,j,I,$,D,12,u[1]),$=f($,L,j,I,F,17,u[2]),I=f(I,$,L,j,P,22,u[3]),j=f(j,I,$,L,H,7,u[4]),L=f(L,j,I,$,S,12,u[5]),$=f($,L,j,I,R,17,u[6]),I=f(I,$,L,j,N,22,u[7]),j=f(j,I,$,L,O,7,u[8]),L=f(L,j,I,$,V,12,u[9]),$=f($,L,j,I,K,17,u[10]),I=f(I,$,L,j,J,22,u[11]),j=f(j,I,$,L,ue,7,u[12]),L=f(L,j,I,$,ee,12,u[13]),$=f($,L,j,I,ce,17,u[14]),I=f(I,$,L,j,ie,22,u[15]),j=p(j,I,$,L,D,5,u[16]),L=p(L,j,I,$,R,9,u[17]),$=p($,L,j,I,J,14,u[18]),I=p(I,$,L,j,k,20,u[19]),j=p(j,I,$,L,S,5,u[20]),L=p(L,j,I,$,K,9,u[21]),$=p($,L,j,I,ie,14,u[22]),I=p(I,$,L,j,H,20,u[23]),j=p(j,I,$,L,V,5,u[24]),L=p(L,j,I,$,ce,9,u[25]),$=p($,L,j,I,P,14,u[26]),I=p(I,$,L,j,O,20,u[27]),j=p(j,I,$,L,ee,5,u[28]),L=p(L,j,I,$,F,9,u[29]),$=p($,L,j,I,N,14,u[30]),I=p(I,$,L,j,ue,20,u[31]),j=v(j,I,$,L,S,4,u[32]),L=v(L,j,I,$,O,11,u[33]),$=v($,L,j,I,J,16,u[34]),I=v(I,$,L,j,ce,23,u[35]),j=v(j,I,$,L,D,4,u[36]),L=v(L,j,I,$,H,11,u[37]),$=v($,L,j,I,N,16,u[38]),I=v(I,$,L,j,K,23,u[39]),j=v(j,I,$,L,ee,4,u[40]),L=v(L,j,I,$,k,11,u[41]),$=v($,L,j,I,P,16,u[42]),I=v(I,$,L,j,R,23,u[43]),j=v(j,I,$,L,V,4,u[44]),L=v(L,j,I,$,ue,11,u[45]),$=v($,L,j,I,ie,16,u[46]),I=v(I,$,L,j,F,23,u[47]),j=_(j,I,$,L,k,6,u[48]),L=_(L,j,I,$,N,10,u[49]),$=_($,L,j,I,ce,15,u[50]),I=_(I,$,L,j,S,21,u[51]),j=_(j,I,$,L,ue,6,u[52]),L=_(L,j,I,$,P,10,u[53]),$=_($,L,j,I,K,15,u[54]),I=_(I,$,L,j,D,21,u[55]),j=_(j,I,$,L,O,6,u[56]),L=_(L,j,I,$,ie,10,u[57]),$=_($,L,j,I,R,15,u[58]),I=_(I,$,L,j,ee,21,u[59]),j=_(j,I,$,L,H,6,u[60]),L=_(L,j,I,$,J,10,u[61]),$=_($,L,j,I,F,15,u[62]),I=_(I,$,L,j,V,21,u[63]),E[0]=E[0]+j|0,E[1]=E[1]+I|0,E[2]=E[2]+$|0,E[3]=E[3]+L|0},_doFinalize:function(){var w=this._data,y=w.words,A=this._nDataBytes*8,m=w.sigBytes*8;y[m>>>5]|=128<<24-m%32;var g=r.floor(A/4294967296),E=A;y[(m+64>>>9<<4)+15]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,y[(m+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,w.sigBytes=(y.length+1)*4,this._process();for(var k=this._hash,D=k.words,F=0;F<4;F++){var P=D[F];D[F]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360}return k},clone:function(){var w=o.clone.call(this);return w._hash=this._hash.clone(),w}});function f(w,y,A,m,g,E,k){var D=w+(y&A|~y&m)+g+k;return(D<<E|D>>>32-E)+y}function p(w,y,A,m,g,E,k){var D=w+(y&m|A&~m)+g+k;return(D<<E|D>>>32-E)+y}function v(w,y,A,m,g,E,k){var D=w+(y^A^m)+g+k;return(D<<E|D>>>32-E)+y}function _(w,y,A,m,g,E,k){var D=w+(A^(y|~m))+g+k;return(D<<E|D>>>32-E)+y}s.MD5=o._createHelper(d),s.HmacMD5=o._createHmacHelper(d)}(Math),t.MD5})}(Gr)),Gr.exports}var Yr={exports:{}},Ei;function Rn(){return Ei||(Ei=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(){var r=t,s=r.lib,n=s.WordArray,a=s.Hasher,o=r.algo,h=[],u=o.SHA1=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,f){for(var p=this._hash.words,v=p[0],_=p[1],w=p[2],y=p[3],A=p[4],m=0;m<80;m++){if(m<16)h[m]=d[f+m]|0;else{var g=h[m-3]^h[m-8]^h[m-14]^h[m-16];h[m]=g<<1|g>>>31}var E=(v<<5|v>>>27)+A+h[m];m<20?E+=(_&w|~_&y)+1518500249:m<40?E+=(_^w^y)+1859775393:m<60?E+=(_&w|_&y|w&y)-1894007588:E+=(_^w^y)-899497514,A=y,y=w,w=_<<30|_>>>2,_=v,v=E}p[0]=p[0]+v|0,p[1]=p[1]+_|0,p[2]=p[2]+w|0,p[3]=p[3]+y|0,p[4]=p[4]+A|0},_doFinalize:function(){var d=this._data,f=d.words,p=this._nDataBytes*8,v=d.sigBytes*8;return f[v>>>5]|=128<<24-v%32,f[(v+64>>>9<<4)+14]=Math.floor(p/4294967296),f[(v+64>>>9<<4)+15]=p,d.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u)}(),t.SHA1})}(Yr)),Yr.exports}var Jr={exports:{}},Ai;function Vs(){return Ai||(Ai=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){return function(r){var s=t,n=s.lib,a=n.WordArray,o=n.Hasher,h=s.algo,u=[],d=[];(function(){function v(A){for(var m=r.sqrt(A),g=2;g<=m;g++)if(!(A%g))return!1;return!0}function _(A){return(A-(A|0))*4294967296|0}for(var w=2,y=0;y<64;)v(w)&&(y<8&&(u[y]=_(r.pow(w,1/2))),d[y]=_(r.pow(w,1/3)),y++),w++})();var f=[],p=h.SHA256=o.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(v,_){for(var w=this._hash.words,y=w[0],A=w[1],m=w[2],g=w[3],E=w[4],k=w[5],D=w[6],F=w[7],P=0;P<64;P++){if(P<16)f[P]=v[_+P]|0;else{var H=f[P-15],S=(H<<25|H>>>7)^(H<<14|H>>>18)^H>>>3,R=f[P-2],N=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;f[P]=S+f[P-7]+N+f[P-16]}var O=E&k^~E&D,V=y&A^y&m^A&m,K=(y<<30|y>>>2)^(y<<19|y>>>13)^(y<<10|y>>>22),J=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ue=F+J+O+d[P]+f[P],ee=K+V;F=D,D=k,k=E,E=g+ue|0,g=m,m=A,A=y,y=ue+ee|0}w[0]=w[0]+y|0,w[1]=w[1]+A|0,w[2]=w[2]+m|0,w[3]=w[3]+g|0,w[4]=w[4]+E|0,w[5]=w[5]+k|0,w[6]=w[6]+D|0,w[7]=w[7]+F|0},_doFinalize:function(){var v=this._data,_=v.words,w=this._nDataBytes*8,y=v.sigBytes*8;return _[y>>>5]|=128<<24-y%32,_[(y+64>>>9<<4)+14]=r.floor(w/4294967296),_[(y+64>>>9<<4)+15]=w,v.sigBytes=_.length*4,this._process(),this._hash},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}});s.SHA256=o._createHelper(p),s.HmacSHA256=o._createHmacHelper(p)}(Math),t.SHA256})}(Jr)),Jr.exports}var Xr={exports:{}},Ci;function tc(){return Ci||(Ci=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Vs())})(G,function(t){return function(){var r=t,s=r.lib,n=s.WordArray,a=r.algo,o=a.SHA256,h=a.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=o._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=o._createHelper(h),r.HmacSHA224=o._createHmacHelper(h)}(),t.SHA224})}(Xr)),Xr.exports}var Qr={exports:{}},Bi;function Pn(){return Bi||(Bi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),kr())})(G,function(t){return function(){var r=t,s=r.lib,n=s.Hasher,a=r.x64,o=a.Word,h=a.WordArray,u=r.algo;function d(){return o.create.apply(o,arguments)}var f=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],p=[];(function(){for(var _=0;_<80;_++)p[_]=d()})();var v=u.SHA512=n.extend({_doReset:function(){this._hash=new h.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(_,w){for(var y=this._hash.words,A=y[0],m=y[1],g=y[2],E=y[3],k=y[4],D=y[5],F=y[6],P=y[7],H=A.high,S=A.low,R=m.high,N=m.low,O=g.high,V=g.low,K=E.high,J=E.low,ue=k.high,ee=k.low,ce=D.high,ie=D.low,j=F.high,I=F.low,$=P.high,L=P.low,oe=H,le=S,be=R,Y=N,Le=O,Pe=V,mt=K,We=J,Ae=ue,we=ee,Me=ce,ze=ie,Ve=j,Je=I,Xe=$,Qe=L,Se=0;Se<80;Se++){var xe,Ie,lt=p[Se];if(Se<16)Ie=lt.high=_[w+Se*2]|0,xe=lt.low=_[w+Se*2+1]|0;else{var Oe=p[Se-15],Ke=Oe.high,x=Oe.low,c=(Ke>>>1|x<<31)^(Ke>>>8|x<<24)^Ke>>>7,l=(x>>>1|Ke<<31)^(x>>>8|Ke<<24)^(x>>>7|Ke<<25),b=p[Se-2],B=b.high,T=b.low,U=(B>>>19|T<<13)^(B<<3|T>>>29)^B>>>6,Q=(T>>>19|B<<13)^(T<<3|B>>>29)^(T>>>6|B<<26),pe=p[Se-7],fe=pe.high,ge=pe.low,he=p[Se-16],Ht=he.high,qt=he.low;xe=l+ge,Ie=c+fe+(xe>>>0<l>>>0?1:0),xe=xe+Q,Ie=Ie+U+(xe>>>0<Q>>>0?1:0),xe=xe+qt,Ie=Ie+Ht+(xe>>>0<qt>>>0?1:0),lt.high=Ie,lt.low=xe}var ut=Ae&Me^~Ae&Ve,kt=we&ze^~we&Je,Wt=oe&be^oe&Le^be&Le,nr=le&Y^le&Pe^Y&Pe,Fr=(oe>>>28|le<<4)^(oe<<30|le>>>2)^(oe<<25|le>>>7),Mt=(le>>>28|oe<<4)^(le<<30|oe>>>2)^(le<<25|oe>>>7),jr=(Ae>>>14|we<<18)^(Ae>>>18|we<<14)^(Ae<<23|we>>>9),or=(we>>>14|Ae<<18)^(we>>>18|Ae<<14)^(we<<23|Ae>>>9),Vt=f[Se],Tr=Vt.high,ar=Vt.low,je=Qe+or,Ze=Xe+jr+(je>>>0<Qe>>>0?1:0),je=je+kt,Ze=Ze+ut+(je>>>0<kt>>>0?1:0),je=je+ar,Ze=Ze+Tr+(je>>>0<ar>>>0?1:0),je=je+xe,Ze=Ze+Ie+(je>>>0<xe>>>0?1:0),cr=Mt+nr,C=Fr+Wt+(cr>>>0<Mt>>>0?1:0);Xe=Ve,Qe=Je,Ve=Me,Je=ze,Me=Ae,ze=we,we=We+je|0,Ae=mt+Ze+(we>>>0<We>>>0?1:0)|0,mt=Le,We=Pe,Le=be,Pe=Y,be=oe,Y=le,le=je+cr|0,oe=Ze+C+(le>>>0<je>>>0?1:0)|0}S=A.low=S+le,A.high=H+oe+(S>>>0<le>>>0?1:0),N=m.low=N+Y,m.high=R+be+(N>>>0<Y>>>0?1:0),V=g.low=V+Pe,g.high=O+Le+(V>>>0<Pe>>>0?1:0),J=E.low=J+We,E.high=K+mt+(J>>>0<We>>>0?1:0),ee=k.low=ee+we,k.high=ue+Ae+(ee>>>0<we>>>0?1:0),ie=D.low=ie+ze,D.high=ce+Me+(ie>>>0<ze>>>0?1:0),I=F.low=I+Je,F.high=j+Ve+(I>>>0<Je>>>0?1:0),L=P.low=L+Qe,P.high=$+Xe+(L>>>0<Qe>>>0?1:0)},_doFinalize:function(){var _=this._data,w=_.words,y=this._nDataBytes*8,A=_.sigBytes*8;w[A>>>5]|=128<<24-A%32,w[(A+128>>>10<<5)+30]=Math.floor(y/4294967296),w[(A+128>>>10<<5)+31]=y,_.sigBytes=w.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var _=n.clone.call(this);return _._hash=this._hash.clone(),_},blockSize:1024/32});r.SHA512=n._createHelper(v),r.HmacSHA512=n._createHmacHelper(v)}(),t.SHA512})}(Qr)),Qr.exports}var Zr={exports:{}},Di;function rc(){return Di||(Di=1,function(i,e){(function(t,r,s){i.exports=r(ne(),kr(),Pn())})(G,function(t){return function(){var r=t,s=r.x64,n=s.Word,a=s.WordArray,o=r.algo,h=o.SHA512,u=o.SHA384=h.extend({_doReset:function(){this._hash=new a.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var d=h._doFinalize.call(this);return d.sigBytes-=16,d}});r.SHA384=h._createHelper(u),r.HmacSHA384=h._createHmacHelper(u)}(),t.SHA384})}(Zr)),Zr.exports}var es={exports:{}},ki;function sc(){return ki||(ki=1,function(i,e){(function(t,r,s){i.exports=r(ne(),kr())})(G,function(t){return function(r){var s=t,n=s.lib,a=n.WordArray,o=n.Hasher,h=s.x64,u=h.Word,d=s.algo,f=[],p=[],v=[];(function(){for(var y=1,A=0,m=0;m<24;m++){f[y+5*A]=(m+1)*(m+2)/2%64;var g=A%5,E=(2*y+3*A)%5;y=g,A=E}for(var y=0;y<5;y++)for(var A=0;A<5;A++)p[y+5*A]=A+(2*y+3*A)%5*5;for(var k=1,D=0;D<24;D++){for(var F=0,P=0,H=0;H<7;H++){if(k&1){var S=(1<<H)-1;S<32?P^=1<<S:F^=1<<S-32}k&128?k=k<<1^113:k<<=1}v[D]=u.create(F,P)}})();var _=[];(function(){for(var y=0;y<25;y++)_[y]=u.create()})();var w=d.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var y=this._state=[],A=0;A<25;A++)y[A]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(y,A){for(var m=this._state,g=this.blockSize/2,E=0;E<g;E++){var k=y[A+2*E],D=y[A+2*E+1];k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,D=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360;var F=m[E];F.high^=D,F.low^=k}for(var P=0;P<24;P++){for(var H=0;H<5;H++){for(var S=0,R=0,N=0;N<5;N++){var F=m[H+5*N];S^=F.high,R^=F.low}var O=_[H];O.high=S,O.low=R}for(var H=0;H<5;H++)for(var V=_[(H+4)%5],K=_[(H+1)%5],J=K.high,ue=K.low,S=V.high^(J<<1|ue>>>31),R=V.low^(ue<<1|J>>>31),N=0;N<5;N++){var F=m[H+5*N];F.high^=S,F.low^=R}for(var ee=1;ee<25;ee++){var S,R,F=m[ee],ce=F.high,ie=F.low,j=f[ee];j<32?(S=ce<<j|ie>>>32-j,R=ie<<j|ce>>>32-j):(S=ie<<j-32|ce>>>64-j,R=ce<<j-32|ie>>>64-j);var I=_[p[ee]];I.high=S,I.low=R}var $=_[0],L=m[0];$.high=L.high,$.low=L.low;for(var H=0;H<5;H++)for(var N=0;N<5;N++){var ee=H+5*N,F=m[ee],oe=_[ee],le=_[(H+1)%5+5*N],be=_[(H+2)%5+5*N];F.high=oe.high^~le.high&be.high,F.low=oe.low^~le.low&be.low}var F=m[0],Y=v[P];F.high^=Y.high,F.low^=Y.low}},_doFinalize:function(){var y=this._data,A=y.words;this._nDataBytes*8;var m=y.sigBytes*8,g=this.blockSize*32;A[m>>>5]|=1<<24-m%32,A[(r.ceil((m+1)/g)*g>>>5)-1]|=128,y.sigBytes=A.length*4,this._process();for(var E=this._state,k=this.cfg.outputLength/8,D=k/8,F=[],P=0;P<D;P++){var H=E[P],S=H.high,R=H.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,F.push(R),F.push(S)}return new a.init(F,k)},clone:function(){for(var y=o.clone.call(this),A=y._state=this._state.slice(0),m=0;m<25;m++)A[m]=A[m].clone();return y}});s.SHA3=o._createHelper(w),s.HmacSHA3=o._createHmacHelper(w)}(Math),t.SHA3})}(es)),es.exports}var ts={exports:{}},Si;function ic(){return Si||(Si=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var s=t,n=s.lib,a=n.WordArray,o=n.Hasher,h=s.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),p=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),v=a.create([0,1518500249,1859775393,2400959708,2840853838]),_=a.create([1352829926,1548603684,1836072691,2053994217,0]),w=h.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(D,F){for(var P=0;P<16;P++){var H=F+P,S=D[H];D[H]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var R=this._hash.words,N=v.words,O=_.words,V=u.words,K=d.words,J=f.words,ue=p.words,ee,ce,ie,j,I,$,L,oe,le,be;$=ee=R[0],L=ce=R[1],oe=ie=R[2],le=j=R[3],be=I=R[4];for(var Y,P=0;P<80;P+=1)Y=ee+D[F+V[P]]|0,P<16?Y+=y(ce,ie,j)+N[0]:P<32?Y+=A(ce,ie,j)+N[1]:P<48?Y+=m(ce,ie,j)+N[2]:P<64?Y+=g(ce,ie,j)+N[3]:Y+=E(ce,ie,j)+N[4],Y=Y|0,Y=k(Y,J[P]),Y=Y+I|0,ee=I,I=j,j=k(ie,10),ie=ce,ce=Y,Y=$+D[F+K[P]]|0,P<16?Y+=E(L,oe,le)+O[0]:P<32?Y+=g(L,oe,le)+O[1]:P<48?Y+=m(L,oe,le)+O[2]:P<64?Y+=A(L,oe,le)+O[3]:Y+=y(L,oe,le)+O[4],Y=Y|0,Y=k(Y,ue[P]),Y=Y+be|0,$=be,be=le,le=k(oe,10),oe=L,L=Y;Y=R[1]+ie+le|0,R[1]=R[2]+j+be|0,R[2]=R[3]+I+$|0,R[3]=R[4]+ee+L|0,R[4]=R[0]+ce+oe|0,R[0]=Y},_doFinalize:function(){var D=this._data,F=D.words,P=this._nDataBytes*8,H=D.sigBytes*8;F[H>>>5]|=128<<24-H%32,F[(H+64>>>9<<4)+14]=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,D.sigBytes=(F.length+1)*4,this._process();for(var S=this._hash,R=S.words,N=0;N<5;N++){var O=R[N];R[N]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}return S},clone:function(){var D=o.clone.call(this);return D._hash=this._hash.clone(),D}});function y(D,F,P){return D^F^P}function A(D,F,P){return D&F|~D&P}function m(D,F,P){return(D|~F)^P}function g(D,F,P){return D&P|F&~P}function E(D,F,P){return D^(F|~P)}function k(D,F){return D<<F|D>>>32-F}s.RIPEMD160=o._createHelper(w),s.HmacRIPEMD160=o._createHmacHelper(w)}(),t.RIPEMD160})}(ts)),ts.exports}var rs={exports:{}},Fi;function Ks(){return Fi||(Fi=1,function(i,e){(function(t,r){i.exports=r(ne())})(G,function(t){(function(){var r=t,s=r.lib,n=s.Base,a=r.enc,o=a.Utf8,h=r.algo;h.HMAC=n.extend({init:function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=o.parse(d));var f=u.blockSize,p=f*4;d.sigBytes>p&&(d=u.finalize(d)),d.clamp();for(var v=this._oKey=d.clone(),_=this._iKey=d.clone(),w=v.words,y=_.words,A=0;A<f;A++)w[A]^=1549556828,y[A]^=909522486;v.sigBytes=_.sigBytes=p,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var d=this._hasher,f=d.finalize(u);d.reset();var p=d.finalize(this._oKey.clone().concat(f));return p}})})()})}(rs)),rs.exports}var ss={exports:{}},ji;function nc(){return ji||(ji=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Vs(),Ks())})(G,function(t){return function(){var r=t,s=r.lib,n=s.Base,a=s.WordArray,o=r.algo,h=o.SHA256,u=o.HMAC,d=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:h,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,p){for(var v=this.cfg,_=u.create(v.hasher,f),w=a.create(),y=a.create([1]),A=w.words,m=y.words,g=v.keySize,E=v.iterations;A.length<g;){var k=_.update(p).finalize(y);_.reset();for(var D=k.words,F=D.length,P=k,H=1;H<E;H++){P=_.finalize(P),_.reset();for(var S=P.words,R=0;R<F;R++)D[R]^=S[R]}w.concat(k),m[0]++}return w.sigBytes=g*4,w}});r.PBKDF2=function(f,p,v){return d.create(v).compute(f,p)}}(),t.PBKDF2})}(ss)),ss.exports}var is={exports:{}},Ti;function gt(){return Ti||(Ti=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Rn(),Ks())})(G,function(t){return function(){var r=t,s=r.lib,n=s.Base,a=s.WordArray,o=r.algo,h=o.MD5,u=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:h,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var p,v=this.cfg,_=v.hasher.create(),w=a.create(),y=w.words,A=v.keySize,m=v.iterations;y.length<A;){p&&_.update(p),p=_.update(d).finalize(f),_.reset();for(var g=1;g<m;g++)p=_.finalize(p),_.reset();w.concat(p)}return w.sigBytes=A*4,w}});r.EvpKDF=function(d,f,p){return u.create(p).compute(d,f)}}(),t.EvpKDF})}(is)),is.exports}var ns={exports:{}},Ri;function Fe(){return Ri||(Ri=1,function(i,e){(function(t,r,s){i.exports=r(ne(),gt())})(G,function(t){t.lib.Cipher||function(r){var s=t,n=s.lib,a=n.Base,o=n.WordArray,h=n.BufferedBlockAlgorithm,u=s.enc;u.Utf8;var d=u.Base64,f=s.algo,p=f.EvpKDF,v=n.Cipher=h.extend({cfg:a.extend(),createEncryptor:function(S,R){return this.create(this._ENC_XFORM_MODE,S,R)},createDecryptor:function(S,R){return this.create(this._DEC_XFORM_MODE,S,R)},init:function(S,R,N){this.cfg=this.cfg.extend(N),this._xformMode=S,this._key=R,this.reset()},reset:function(){h.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var R=this._doFinalize();return R},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(R){return typeof R=="string"?H:D}return function(R){return{encrypt:function(N,O,V){return S(O).encrypt(R,N,O,V)},decrypt:function(N,O,V){return S(O).decrypt(R,N,O,V)}}}}()});n.StreamCipher=v.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var _=s.mode={},w=n.BlockCipherMode=a.extend({createEncryptor:function(S,R){return this.Encryptor.create(S,R)},createDecryptor:function(S,R){return this.Decryptor.create(S,R)},init:function(S,R){this._cipher=S,this._iv=R}}),y=_.CBC=function(){var S=w.extend();S.Encryptor=S.extend({processBlock:function(N,O){var V=this._cipher,K=V.blockSize;R.call(this,N,O,K),V.encryptBlock(N,O),this._prevBlock=N.slice(O,O+K)}}),S.Decryptor=S.extend({processBlock:function(N,O){var V=this._cipher,K=V.blockSize,J=N.slice(O,O+K);V.decryptBlock(N,O),R.call(this,N,O,K),this._prevBlock=J}});function R(N,O,V){var K,J=this._iv;J?(K=J,this._iv=r):K=this._prevBlock;for(var ue=0;ue<V;ue++)N[O+ue]^=K[ue]}return S}(),A=s.pad={},m=A.Pkcs7={pad:function(S,R){for(var N=R*4,O=N-S.sigBytes%N,V=O<<24|O<<16|O<<8|O,K=[],J=0;J<O;J+=4)K.push(V);var ue=o.create(K,O);S.concat(ue)},unpad:function(S){var R=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=R}};n.BlockCipher=v.extend({cfg:v.cfg.extend({mode:y,padding:m}),reset:function(){var S;v.reset.call(this);var R=this.cfg,N=R.iv,O=R.mode;this._xformMode==this._ENC_XFORM_MODE?S=O.createEncryptor:(S=O.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,N&&N.words):(this._mode=S.call(O,this,N&&N.words),this._mode.__creator=S)},_doProcessBlock:function(S,R){this._mode.processBlock(S,R)},_doFinalize:function(){var S,R=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(R.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),R.unpad(S)),S},blockSize:128/32});var g=n.CipherParams=a.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),E=s.format={},k=E.OpenSSL={stringify:function(S){var R,N=S.ciphertext,O=S.salt;return O?R=o.create([1398893684,1701076831]).concat(O).concat(N):R=N,R.toString(d)},parse:function(S){var R,N=d.parse(S),O=N.words;return O[0]==1398893684&&O[1]==1701076831&&(R=o.create(O.slice(2,4)),O.splice(0,4),N.sigBytes-=16),g.create({ciphertext:N,salt:R})}},D=n.SerializableCipher=a.extend({cfg:a.extend({format:k}),encrypt:function(S,R,N,O){O=this.cfg.extend(O);var V=S.createEncryptor(N,O),K=V.finalize(R),J=V.cfg;return g.create({ciphertext:K,key:N,iv:J.iv,algorithm:S,mode:J.mode,padding:J.padding,blockSize:S.blockSize,formatter:O.format})},decrypt:function(S,R,N,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var V=S.createDecryptor(N,O).finalize(R.ciphertext);return V},_parse:function(S,R){return typeof S=="string"?R.parse(S,this):S}}),F=s.kdf={},P=F.OpenSSL={execute:function(S,R,N,O,V){if(O||(O=o.random(64/8)),V)var K=p.create({keySize:R+N,hasher:V}).compute(S,O);else var K=p.create({keySize:R+N}).compute(S,O);var J=o.create(K.words.slice(R),N*4);return K.sigBytes=R*4,g.create({key:K,iv:J,salt:O})}},H=n.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:P}),encrypt:function(S,R,N,O){O=this.cfg.extend(O);var V=O.kdf.execute(N,S.keySize,S.ivSize,O.salt,O.hasher);O.iv=V.iv;var K=D.encrypt.call(this,S,R,V.key,O);return K.mixIn(V),K},decrypt:function(S,R,N,O){O=this.cfg.extend(O),R=this._parse(R,O.format);var V=O.kdf.execute(N,S.keySize,S.ivSize,R.salt,O.hasher);O.iv=V.iv;var K=D.decrypt.call(this,S,R,V.key,O);return K}})}()})}(ns)),ns.exports}var os={exports:{}},Pi;function oc(){return Pi||(Pi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.mode.CFB=function(){var r=t.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(n,a){var o=this._cipher,h=o.blockSize;s.call(this,n,a,h,o),this._prevBlock=n.slice(a,a+h)}}),r.Decryptor=r.extend({processBlock:function(n,a){var o=this._cipher,h=o.blockSize,u=n.slice(a,a+h);s.call(this,n,a,h,o),this._prevBlock=u}});function s(n,a,o,h){var u,d=this._iv;d?(u=d.slice(0),this._iv=void 0):u=this._prevBlock,h.encryptBlock(u,0);for(var f=0;f<o;f++)n[a+f]^=u[f]}return r}(),t.mode.CFB})}(os)),os.exports}var as={exports:{}},Ii;function ac(){return Ii||(Ii=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.mode.CTR=function(){var r=t.lib.BlockCipherMode.extend(),s=r.Encryptor=r.extend({processBlock:function(n,a){var o=this._cipher,h=o.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0);var f=d.slice(0);o.encryptBlock(f,0),d[h-1]=d[h-1]+1|0;for(var p=0;p<h;p++)n[a+p]^=f[p]}});return r.Decryptor=s,r}(),t.mode.CTR})}(as)),as.exports}var cs={exports:{}},Oi;function cc(){return Oi||(Oi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return t.mode.CTRGladman=function(){var r=t.lib.BlockCipherMode.extend();function s(o){if((o>>24&255)===255){var h=o>>16&255,u=o>>8&255,d=o&255;h===255?(h=0,u===255?(u=0,d===255?d=0:++d):++u):++h,o=0,o+=h<<16,o+=u<<8,o+=d}else o+=1<<24;return o}function n(o){return(o[0]=s(o[0]))===0&&(o[1]=s(o[1])),o}var a=r.Encryptor=r.extend({processBlock:function(o,h){var u=this._cipher,d=u.blockSize,f=this._iv,p=this._counter;f&&(p=this._counter=f.slice(0),this._iv=void 0),n(p);var v=p.slice(0);u.encryptBlock(v,0);for(var _=0;_<d;_++)o[h+_]^=v[_]}});return r.Decryptor=a,r}(),t.mode.CTRGladman})}(cs)),cs.exports}var ls={exports:{}},Ui;function lc(){return Ui||(Ui=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.mode.OFB=function(){var r=t.lib.BlockCipherMode.extend(),s=r.Encryptor=r.extend({processBlock:function(n,a){var o=this._cipher,h=o.blockSize,u=this._iv,d=this._keystream;u&&(d=this._keystream=u.slice(0),this._iv=void 0),o.encryptBlock(d,0);for(var f=0;f<h;f++)n[a+f]^=d[f]}});return r.Decryptor=s,r}(),t.mode.OFB})}(ls)),ls.exports}var us={exports:{}},Ni;function uc(){return Ni||(Ni=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.mode.ECB=function(){var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(s,n){this._cipher.encryptBlock(s,n)}}),r.Decryptor=r.extend({processBlock:function(s,n){this._cipher.decryptBlock(s,n)}}),r}(),t.mode.ECB})}(us)),us.exports}var hs={exports:{}},$i;function hc(){return $i||($i=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.pad.AnsiX923={pad:function(r,s){var n=r.sigBytes,a=s*4,o=a-n%a,h=n+o-1;r.clamp(),r.words[h>>>2]|=o<<24-h%4*8,r.sigBytes+=o},unpad:function(r){var s=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=s}},t.pad.Ansix923})}(hs)),hs.exports}var ds={exports:{}},Li;function dc(){return Li||(Li=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.pad.Iso10126={pad:function(r,s){var n=s*4,a=n-r.sigBytes%n;r.concat(t.lib.WordArray.random(a-1)).concat(t.lib.WordArray.create([a<<24],1))},unpad:function(r){var s=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=s}},t.pad.Iso10126})}(ds)),ds.exports}var fs={exports:{}},zi;function fc(){return zi||(zi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.pad.Iso97971={pad:function(r,s){r.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(r,s)},unpad:function(r){t.pad.ZeroPadding.unpad(r),r.sigBytes--}},t.pad.Iso97971})}(fs)),fs.exports}var xs={exports:{}},Hi;function xc(){return Hi||(Hi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.pad.ZeroPadding={pad:function(r,s){var n=s*4;r.clamp(),r.sigBytes+=n-(r.sigBytes%n||n)},unpad:function(r){for(var s=r.words,n=r.sigBytes-1,n=r.sigBytes-1;n>=0;n--)if(s[n>>>2]>>>24-n%4*8&255){r.sigBytes=n+1;break}}},t.pad.ZeroPadding})}(xs)),xs.exports}var ps={exports:{}},qi;function pc(){return qi||(qi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})}(ps)),ps.exports}var vs={exports:{}},Wi;function vc(){return Wi||(Wi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Fe())})(G,function(t){return function(r){var s=t,n=s.lib,a=n.CipherParams,o=s.enc,h=o.Hex,u=s.format;u.Hex={stringify:function(d){return d.ciphertext.toString(h)},parse:function(d){var f=h.parse(d);return a.create({ciphertext:f})}}}(),t.format.Hex})}(vs)),vs.exports}var gs={exports:{}},Mi;function gc(){return Mi||(Mi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Bt(),Dt(),gt(),Fe())})(G,function(t){return function(){var r=t,s=r.lib,n=s.BlockCipher,a=r.algo,o=[],h=[],u=[],d=[],f=[],p=[],v=[],_=[],w=[],y=[];(function(){for(var g=[],E=0;E<256;E++)E<128?g[E]=E<<1:g[E]=E<<1^283;for(var k=0,D=0,E=0;E<256;E++){var F=D^D<<1^D<<2^D<<3^D<<4;F=F>>>8^F&255^99,o[k]=F,h[F]=k;var P=g[k],H=g[P],S=g[H],R=g[F]*257^F*16843008;u[k]=R<<24|R>>>8,d[k]=R<<16|R>>>16,f[k]=R<<8|R>>>24,p[k]=R;var R=S*16843009^H*65537^P*257^k*16843008;v[F]=R<<24|R>>>8,_[F]=R<<16|R>>>16,w[F]=R<<8|R>>>24,y[F]=R,k?(k=P^g[g[g[S^P]]],D^=g[g[D]]):k=D=1}})();var A=[0,1,2,4,8,16,32,64,128,27,54],m=a.AES=n.extend({_doReset:function(){var g;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,k=E.words,D=E.sigBytes/4,F=this._nRounds=D+6,P=(F+1)*4,H=this._keySchedule=[],S=0;S<P;S++)S<D?H[S]=k[S]:(g=H[S-1],S%D?D>6&&S%D==4&&(g=o[g>>>24]<<24|o[g>>>16&255]<<16|o[g>>>8&255]<<8|o[g&255]):(g=g<<8|g>>>24,g=o[g>>>24]<<24|o[g>>>16&255]<<16|o[g>>>8&255]<<8|o[g&255],g^=A[S/D|0]<<24),H[S]=H[S-D]^g);for(var R=this._invKeySchedule=[],N=0;N<P;N++){var S=P-N;if(N%4)var g=H[S];else var g=H[S-4];N<4||S<=4?R[N]=g:R[N]=v[o[g>>>24]]^_[o[g>>>16&255]]^w[o[g>>>8&255]]^y[o[g&255]]}}},encryptBlock:function(g,E){this._doCryptBlock(g,E,this._keySchedule,u,d,f,p,o)},decryptBlock:function(g,E){var k=g[E+1];g[E+1]=g[E+3],g[E+3]=k,this._doCryptBlock(g,E,this._invKeySchedule,v,_,w,y,h);var k=g[E+1];g[E+1]=g[E+3],g[E+3]=k},_doCryptBlock:function(g,E,k,D,F,P,H,S){for(var R=this._nRounds,N=g[E]^k[0],O=g[E+1]^k[1],V=g[E+2]^k[2],K=g[E+3]^k[3],J=4,ue=1;ue<R;ue++){var ee=D[N>>>24]^F[O>>>16&255]^P[V>>>8&255]^H[K&255]^k[J++],ce=D[O>>>24]^F[V>>>16&255]^P[K>>>8&255]^H[N&255]^k[J++],ie=D[V>>>24]^F[K>>>16&255]^P[N>>>8&255]^H[O&255]^k[J++],j=D[K>>>24]^F[N>>>16&255]^P[O>>>8&255]^H[V&255]^k[J++];N=ee,O=ce,V=ie,K=j}var ee=(S[N>>>24]<<24|S[O>>>16&255]<<16|S[V>>>8&255]<<8|S[K&255])^k[J++],ce=(S[O>>>24]<<24|S[V>>>16&255]<<16|S[K>>>8&255]<<8|S[N&255])^k[J++],ie=(S[V>>>24]<<24|S[K>>>16&255]<<16|S[N>>>8&255]<<8|S[O&255])^k[J++],j=(S[K>>>24]<<24|S[N>>>16&255]<<16|S[O>>>8&255]<<8|S[V&255])^k[J++];g[E]=ee,g[E+1]=ce,g[E+2]=ie,g[E+3]=j},keySize:256/32});r.AES=n._createHelper(m)}(),t.AES})}(gs)),gs.exports}var ms={exports:{}},Vi;function mc(){return Vi||(Vi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Bt(),Dt(),gt(),Fe())})(G,function(t){return function(){var r=t,s=r.lib,n=s.WordArray,a=s.BlockCipher,o=r.algo,h=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],v=o.DES=a.extend({_doReset:function(){for(var A=this._key,m=A.words,g=[],E=0;E<56;E++){var k=h[E]-1;g[E]=m[k>>>5]>>>31-k%32&1}for(var D=this._subKeys=[],F=0;F<16;F++){for(var P=D[F]=[],H=d[F],E=0;E<24;E++)P[E/6|0]|=g[(u[E]-1+H)%28]<<31-E%6,P[4+(E/6|0)]|=g[28+(u[E+24]-1+H)%28]<<31-E%6;P[0]=P[0]<<1|P[0]>>>31;for(var E=1;E<7;E++)P[E]=P[E]>>>(E-1)*4+3;P[7]=P[7]<<5|P[7]>>>27}for(var S=this._invSubKeys=[],E=0;E<16;E++)S[E]=D[15-E]},encryptBlock:function(A,m){this._doCryptBlock(A,m,this._subKeys)},decryptBlock:function(A,m){this._doCryptBlock(A,m,this._invSubKeys)},_doCryptBlock:function(A,m,g){this._lBlock=A[m],this._rBlock=A[m+1],_.call(this,4,252645135),_.call(this,16,65535),w.call(this,2,858993459),w.call(this,8,16711935),_.call(this,1,1431655765);for(var E=0;E<16;E++){for(var k=g[E],D=this._lBlock,F=this._rBlock,P=0,H=0;H<8;H++)P|=f[H][((F^k[H])&p[H])>>>0];this._lBlock=F,this._rBlock=D^P}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,_.call(this,1,1431655765),w.call(this,8,16711935),w.call(this,2,858993459),_.call(this,16,65535),_.call(this,4,252645135),A[m]=this._lBlock,A[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function _(A,m){var g=(this._lBlock>>>A^this._rBlock)&m;this._rBlock^=g,this._lBlock^=g<<A}function w(A,m){var g=(this._rBlock>>>A^this._lBlock)&m;this._lBlock^=g,this._rBlock^=g<<A}r.DES=a._createHelper(v);var y=o.TripleDES=a.extend({_doReset:function(){var A=this._key,m=A.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var g=m.slice(0,2),E=m.length<4?m.slice(0,2):m.slice(2,4),k=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=v.createEncryptor(n.create(g)),this._des2=v.createEncryptor(n.create(E)),this._des3=v.createEncryptor(n.create(k))},encryptBlock:function(A,m){this._des1.encryptBlock(A,m),this._des2.decryptBlock(A,m),this._des3.encryptBlock(A,m)},decryptBlock:function(A,m){this._des3.decryptBlock(A,m),this._des2.encryptBlock(A,m),this._des1.decryptBlock(A,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=a._createHelper(y)}(),t.TripleDES})}(ms)),ms.exports}var ys={exports:{}},Ki;function yc(){return Ki||(Ki=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Bt(),Dt(),gt(),Fe())})(G,function(t){return function(){var r=t,s=r.lib,n=s.StreamCipher,a=r.algo,o=a.RC4=n.extend({_doReset:function(){for(var d=this._key,f=d.words,p=d.sigBytes,v=this._S=[],_=0;_<256;_++)v[_]=_;for(var _=0,w=0;_<256;_++){var y=_%p,A=f[y>>>2]>>>24-y%4*8&255;w=(w+v[_]+A)%256;var m=v[_];v[_]=v[w],v[w]=m}this._i=this._j=0},_doProcessBlock:function(d,f){d[f]^=h.call(this)},keySize:256/32,ivSize:0});function h(){for(var d=this._S,f=this._i,p=this._j,v=0,_=0;_<4;_++){f=(f+1)%256,p=(p+d[f])%256;var w=d[f];d[f]=d[p],d[p]=w,v|=d[(d[f]+d[p])%256]<<24-_*8}return this._i=f,this._j=p,v}r.RC4=n._createHelper(o);var u=a.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)h.call(this)}});r.RC4Drop=n._createHelper(u)}(),t.RC4})}(ys)),ys.exports}var _s={exports:{}},Gi;function _c(){return Gi||(Gi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Bt(),Dt(),gt(),Fe())})(G,function(t){return function(){var r=t,s=r.lib,n=s.StreamCipher,a=r.algo,o=[],h=[],u=[],d=a.Rabbit=n.extend({_doReset:function(){for(var p=this._key.words,v=this.cfg.iv,_=0;_<4;_++)p[_]=(p[_]<<8|p[_]>>>24)&16711935|(p[_]<<24|p[_]>>>8)&4278255360;var w=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],y=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var _=0;_<4;_++)f.call(this);for(var _=0;_<8;_++)y[_]^=w[_+4&7];if(v){var A=v.words,m=A[0],g=A[1],E=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,k=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,D=E>>>16|k&4294901760,F=k<<16|E&65535;y[0]^=E,y[1]^=D,y[2]^=k,y[3]^=F,y[4]^=E,y[5]^=D,y[6]^=k,y[7]^=F;for(var _=0;_<4;_++)f.call(this)}},_doProcessBlock:function(p,v){var _=this._X;f.call(this),o[0]=_[0]^_[5]>>>16^_[3]<<16,o[1]=_[2]^_[7]>>>16^_[5]<<16,o[2]=_[4]^_[1]>>>16^_[7]<<16,o[3]=_[6]^_[3]>>>16^_[1]<<16;for(var w=0;w<4;w++)o[w]=(o[w]<<8|o[w]>>>24)&16711935|(o[w]<<24|o[w]>>>8)&4278255360,p[v+w]^=o[w]},blockSize:128/32,ivSize:64/32});function f(){for(var p=this._X,v=this._C,_=0;_<8;_++)h[_]=v[_];v[0]=v[0]+1295307597+this._b|0,v[1]=v[1]+3545052371+(v[0]>>>0<h[0]>>>0?1:0)|0,v[2]=v[2]+886263092+(v[1]>>>0<h[1]>>>0?1:0)|0,v[3]=v[3]+1295307597+(v[2]>>>0<h[2]>>>0?1:0)|0,v[4]=v[4]+3545052371+(v[3]>>>0<h[3]>>>0?1:0)|0,v[5]=v[5]+886263092+(v[4]>>>0<h[4]>>>0?1:0)|0,v[6]=v[6]+1295307597+(v[5]>>>0<h[5]>>>0?1:0)|0,v[7]=v[7]+3545052371+(v[6]>>>0<h[6]>>>0?1:0)|0,this._b=v[7]>>>0<h[7]>>>0?1:0;for(var _=0;_<8;_++){var w=p[_]+v[_],y=w&65535,A=w>>>16,m=((y*y>>>17)+y*A>>>15)+A*A,g=((w&4294901760)*w|0)+((w&65535)*w|0);u[_]=m^g}p[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,p[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,p[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,p[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,p[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,p[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,p[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,p[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=n._createHelper(d)}(),t.Rabbit})}(_s)),_s.exports}var bs={exports:{}},Yi;function bc(){return Yi||(Yi=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Bt(),Dt(),gt(),Fe())})(G,function(t){return function(){var r=t,s=r.lib,n=s.StreamCipher,a=r.algo,o=[],h=[],u=[],d=a.RabbitLegacy=n.extend({_doReset:function(){var p=this._key.words,v=this.cfg.iv,_=this._X=[p[0],p[3]<<16|p[2]>>>16,p[1],p[0]<<16|p[3]>>>16,p[2],p[1]<<16|p[0]>>>16,p[3],p[2]<<16|p[1]>>>16],w=this._C=[p[2]<<16|p[2]>>>16,p[0]&4294901760|p[1]&65535,p[3]<<16|p[3]>>>16,p[1]&4294901760|p[2]&65535,p[0]<<16|p[0]>>>16,p[2]&4294901760|p[3]&65535,p[1]<<16|p[1]>>>16,p[3]&4294901760|p[0]&65535];this._b=0;for(var y=0;y<4;y++)f.call(this);for(var y=0;y<8;y++)w[y]^=_[y+4&7];if(v){var A=v.words,m=A[0],g=A[1],E=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,k=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360,D=E>>>16|k&4294901760,F=k<<16|E&65535;w[0]^=E,w[1]^=D,w[2]^=k,w[3]^=F,w[4]^=E,w[5]^=D,w[6]^=k,w[7]^=F;for(var y=0;y<4;y++)f.call(this)}},_doProcessBlock:function(p,v){var _=this._X;f.call(this),o[0]=_[0]^_[5]>>>16^_[3]<<16,o[1]=_[2]^_[7]>>>16^_[5]<<16,o[2]=_[4]^_[1]>>>16^_[7]<<16,o[3]=_[6]^_[3]>>>16^_[1]<<16;for(var w=0;w<4;w++)o[w]=(o[w]<<8|o[w]>>>24)&16711935|(o[w]<<24|o[w]>>>8)&4278255360,p[v+w]^=o[w]},blockSize:128/32,ivSize:64/32});function f(){for(var p=this._X,v=this._C,_=0;_<8;_++)h[_]=v[_];v[0]=v[0]+1295307597+this._b|0,v[1]=v[1]+3545052371+(v[0]>>>0<h[0]>>>0?1:0)|0,v[2]=v[2]+886263092+(v[1]>>>0<h[1]>>>0?1:0)|0,v[3]=v[3]+1295307597+(v[2]>>>0<h[2]>>>0?1:0)|0,v[4]=v[4]+3545052371+(v[3]>>>0<h[3]>>>0?1:0)|0,v[5]=v[5]+886263092+(v[4]>>>0<h[4]>>>0?1:0)|0,v[6]=v[6]+1295307597+(v[5]>>>0<h[5]>>>0?1:0)|0,v[7]=v[7]+3545052371+(v[6]>>>0<h[6]>>>0?1:0)|0,this._b=v[7]>>>0<h[7]>>>0?1:0;for(var _=0;_<8;_++){var w=p[_]+v[_],y=w&65535,A=w>>>16,m=((y*y>>>17)+y*A>>>15)+A*A,g=((w&4294901760)*w|0)+((w&65535)*w|0);u[_]=m^g}p[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,p[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,p[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,p[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,p[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,p[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,p[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,p[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=n._createHelper(d)}(),t.RabbitLegacy})}(bs)),bs.exports}var ws={exports:{}},Ji;function wc(){return Ji||(Ji=1,function(i,e){(function(t,r,s){i.exports=r(ne(),Bt(),Dt(),gt(),Fe())})(G,function(t){return function(){var r=t,s=r.lib,n=s.BlockCipher,a=r.algo;const o=16,h=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function f(y,A){let m=A>>24&255,g=A>>16&255,E=A>>8&255,k=A&255,D=y.sbox[0][m]+y.sbox[1][g];return D=D^y.sbox[2][E],D=D+y.sbox[3][k],D}function p(y,A,m){let g=A,E=m,k;for(let D=0;D<o;++D)g=g^y.pbox[D],E=f(y,g)^E,k=g,g=E,E=k;return k=g,g=E,E=k,E=E^y.pbox[o],g=g^y.pbox[o+1],{left:g,right:E}}function v(y,A,m){let g=A,E=m,k;for(let D=o+1;D>1;--D)g=g^y.pbox[D],E=f(y,g)^E,k=g,g=E,E=k;return k=g,g=E,E=k,E=E^y.pbox[1],g=g^y.pbox[0],{left:g,right:E}}function _(y,A,m){for(let F=0;F<4;F++){y.sbox[F]=[];for(let P=0;P<256;P++)y.sbox[F][P]=u[F][P]}let g=0;for(let F=0;F<o+2;F++)y.pbox[F]=h[F]^A[g],g++,g>=m&&(g=0);let E=0,k=0,D=0;for(let F=0;F<o+2;F+=2)D=p(y,E,k),E=D.left,k=D.right,y.pbox[F]=E,y.pbox[F+1]=k;for(let F=0;F<4;F++)for(let P=0;P<256;P+=2)D=p(y,E,k),E=D.left,k=D.right,y.sbox[F][P]=E,y.sbox[F][P+1]=k;return!0}var w=a.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var y=this._keyPriorReset=this._key,A=y.words,m=y.sigBytes/4;_(d,A,m)}},encryptBlock:function(y,A){var m=p(d,y[A],y[A+1]);y[A]=m.left,y[A+1]=m.right},decryptBlock:function(y,A){var m=v(d,y[A],y[A+1]);y[A]=m.left,y[A+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=n._createHelper(w)}(),t.Blowfish})}(ws)),ws.exports}(function(i,e){(function(t,r,s){i.exports=r(ne(),kr(),Qa(),Za(),Bt(),ec(),Dt(),Rn(),Vs(),tc(),Pn(),rc(),sc(),ic(),Ks(),nc(),gt(),Fe(),oc(),ac(),cc(),lc(),uc(),hc(),dc(),fc(),xc(),pc(),vc(),gc(),mc(),yc(),_c(),bc(),wc())})(G,function(t){return t})})(Tn);var Ec=Tn.exports;const pr=Wn(Ec),Xi="smartstart-ai-default-key-2025",er=class er{static encrypt(e){try{return pr.AES.encrypt(e,Xi).toString()}catch(t){return console.error("Encryption error:",t),e}}static decrypt(e){try{return pr.AES.decrypt(e,Xi).toString(pr.enc.Utf8)}catch(t){return console.error("Decryption error:",t),e}}static sanitizeInput(e){return e?e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").replace(/data:/gi,"").trim().substring(0,1e3):""}static validatePassword(e){const t=[];let r=0;return e.length>=8?r+=20:t.push("يجب أن تكون 8 أحرف على الأقل"),/[a-z]/.test(e)?r+=20:t.push("يجب أن تحتوي على حرف صغير"),/[A-Z]/.test(e)?r+=20:t.push("يجب أن تحتوي على حرف كبير"),/\d/.test(e)?r+=20:t.push("يجب أن تحتوي على رقم"),/[!@#$%^&*(),.?":{}|<>]/.test(e)?r+=20:t.push("يجب أن تحتوي على رمز خاص"),["password","123456","qwerty","admin","user"].some(n=>e.toLowerCase().includes(n))&&(r-=30,t.push("تجنب الكلمات الشائعة")),{isValid:r>=80,score:Math.max(0,r),feedback:t}}static validateEmail(e){var o;const r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),s=["tempmail","10minutemail","guerrillamail"],n=(o=e.split("@")[1])==null?void 0:o.toLowerCase(),a=s.some(h=>n==null?void 0:n.includes(h));return r&&!a}static validateSaudiPhone(e){const t=e.replace(/[\s\-\(\)]/g,"");return/^(05|5)[0-9]{8}$/.test(t)}static generateSessionToken(){return pr.lib.WordArray.random(32).toString()}static validateCSRFToken(e,t){return e===t}static logSuspiciousActivity(e){console.warn("Suspicious activity detected:",e);const t=JSON.parse(localStorage.getItem("security_logs")||"[]");t.push(e),t.length>100&&t.splice(0,t.length-100),localStorage.setItem("security_logs",JSON.stringify(t))}static clearSensitiveData(e){typeof e=="object"&&e!==null&&Object.keys(e).forEach(t=>{if(t.toLowerCase().includes("password")||t.toLowerCase().includes("token")||t.toLowerCase().includes("secret")||t.toLowerCase().includes("key"))try{e[t]=null,delete e[t]}catch{}})}static checkBrowserSecurity(){const e=[];let t=!0;location.protocol!=="https:"&&location.hostname!=="localhost"&&(e.push("الموقع غير آمن (HTTP)"),t=!1);try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch{e.push("التخزين المحلي غير متاح")}return navigator.cookieEnabled||e.push("الكوكيز معطلة"),typeof window>"u"&&(e.push("JavaScript غير مفعل"),t=!1),{isSecure:t,warnings:e}}};et(er,"secureLocalStorage",{setItem:(e,t)=>{try{const r=er.encrypt(t);localStorage.setItem(e,r)}catch(r){console.error("Secure storage error:",r)}},getItem:e=>{try{const t=localStorage.getItem(e);return t?er.decrypt(t):null}catch(t){return console.error("Secure retrieval error:",t),null}},removeItem:e=>{localStorage.removeItem(e)}});let Ne=er;class Gs{constructor(e=5,t=15*60*1e3){et(this,"attempts",new Map);et(this,"maxAttempts");et(this,"windowMs");this.maxAttempts=e,this.windowMs=t}isAllowed(e){const t=Date.now(),r=this.attempts.get(e);return r?t>r.resetTime?(this.attempts.set(e,{count:1,resetTime:t+this.windowMs}),!0):r.count>=this.maxAttempts?!1:(r.count++,!0):(this.attempts.set(e,{count:1,resetTime:t+this.windowMs}),!0)}getRemainingAttempts(e){const t=this.attempts.get(e);return!t||Date.now()>t.resetTime?this.maxAttempts:Math.max(0,this.maxAttempts-t.count)}getResetTime(e){const t=this.attempts.get(e);return(t==null?void 0:t.resetTime)||0}}class Ac{static setupCSP(){const e=document.createElement("meta");e.httpEquiv="Content-Security-Policy",e.content=`
      default-src 'self';
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net;
      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
      font-src 'self' https://fonts.gstatic.com;
      img-src 'self' data: https: blob:;
      connect-src 'self' https://api.supabase.co wss://api.supabase.co;
      media-src 'self' blob:;
    `.replace(/\s+/g," ").trim(),document.head.appendChild(e)}}const Nt=class Nt{static startSessionMonitoring(){let e=Date.now();const t=()=>{e=Date.now(),Ne.secureLocalStorage.setItem("last_activity",e.toString())};["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.addEventListener(s,t,!0)});const r=setInterval(()=>{Date.now()-e>Nt.MAX_IDLE_TIME&&(Nt.expireSession(),clearInterval(r))},6e4);return()=>{clearInterval(r),["mousedown","mousemove","keypress","scroll","touchstart","click"].forEach(s=>{document.removeEventListener(s,t,!0)})}}static expireSession(){toast.error("انتهت صلاحية الجلسة بسبب عدم النشاط"),Ne.clearSensitiveData(window),localStorage.clear(),sessionStorage.clear(),window.location.href="/"}};et(Nt,"SESSION_KEY","smartstart_session"),et(Nt,"MAX_IDLE_TIME",30*60*1e3);let Ns=Nt;const vr=new Gs(5,15*60*1e3),Dl=new Gs(100,60*1e3),kl=new Gs(20,60*1e3);if(typeof window<"u"){Ac.setupCSP(),Ns.startSessionMonitoring();const i=Ne.checkBrowserSecurity();i.isSecure||console.warn("Browser security warnings:",i.warnings)}const At=class At{constructor(){et(this,"currentSession",null);et(this,"sessionCheckInterval",null);this.initializeSessionMonitoring()}static getInstance(){return At.instance||(At.instance=new At),At.instance}async signInWithGoogle(){try{const{data:e,error:t}=await _e.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});return t?(this.logSecurityEvent("google_signin_failed",void 0,{error:t.message}),{success:!1,error:this.getLocalizedAuthError(t.message)}):(this.logSecurityEvent("google_signin_initiated"),{success:!0})}catch(e){return console.error("Google sign in error:",e),{success:!1,error:"خطأ في تسجيل الدخول عبر Google"}}}async signInWithApple(){try{const{data:e,error:t}=await _e.auth.signInWithOAuth({provider:"apple",options:{redirectTo:`${window.location.origin}/auth/callback`}});return t?(this.logSecurityEvent("apple_signin_failed",void 0,{error:t.message}),{success:!1,error:this.getLocalizedAuthError(t.message)}):(this.logSecurityEvent("apple_signin_initiated"),{success:!0})}catch(e){return console.error("Apple sign in error:",e),{success:!1,error:"خطأ في تسجيل الدخول عبر Apple"}}}async handleOAuthCallback(){var e,t,r,s,n,a;try{const{data:{session:o},error:h}=await _e.auth.getSession();if(h)throw h;if(o!=null&&o.user){const{data:u}=await _e.from("users").select("*").eq("id",o.user.id).single();if(!u){const{error:f}=await _e.from("users").insert([{id:o.user.id,email:o.user.email||"",name:((e=o.user.user_metadata)==null?void 0:e.full_name)||((t=o.user.user_metadata)==null?void 0:t.name)||"مستخدم جديد",phone:((r=o.user.user_metadata)==null?void 0:r.phone)||"",city:"الرياض",subscription_type:"free",email_verified:!!o.user.email_confirmed_at,phone_verified:!1,login_count:1,auth_provider:((s=o.user.app_metadata)==null?void 0:s.provider)||"email",avatar_url:(n=o.user.user_metadata)==null?void 0:n.avatar_url,preferences:{language:"ar",notifications:{email:!0,sms:!1,push:!0,marketing:!1},privacy:{profile_visibility:"private",data_sharing:!1,analytics:!0}}}]);if(f)return console.error("Profile creation error:",f),{success:!1,error:"خطأ في إنشاء الملف الشخصي"}}await this.updateLoginStats(o.user.id);const d=await this.fetchUserProfile(o.user.id);return this.logSecurityEvent("oauth_signin_success",o.user.id,{provider:(a=o.user.app_metadata)==null?void 0:a.provider}),{success:!0,user:d}}return{success:!1,error:"فشل في تسجيل الدخول"}}catch(o){return console.error("OAuth callback error:",o),{success:!1,error:"خطأ في معالجة تسجيل الدخول"}}}initializeSessionMonitoring(){this.sessionCheckInterval=setInterval(async()=>{if(this.currentSession){const e=Date.now(),t=this.currentSession.expires_at*1e3;t-e<5*60*1e3&&t>e&&await this.refreshSession()}},6e4)}async signUp(e,t,r){try{if(!vr.isAllowed(e))return{success:!1,error:`تم تجاوز عدد المحاولات المسموح. حاول مرة أخرى خلال ${Math.ceil((vr.getResetTime(e)-Date.now())/6e4)} دقيقة`};const s=this.validateSignUpData(e,t,r);if(!s.isValid)return{success:!1,error:s.error};const n={name:Ne.sanitizeInput(r.name),phone:r.phone.replace(/\D/g,""),city:r.city},{data:a,error:o}=await _e.auth.signUp({email:e.toLowerCase().trim(),password:t,options:{data:{name:n.name,phone:n.phone,city:n.city}}});if(o)return this.logSecurityEvent("signup_failed",{email:e,error:o.message}),{success:!1,error:this.getLocalizedAuthError(o.message)};if(a.user){const{error:h}=await _e.from("users").insert([{id:a.user.id,email:e.toLowerCase().trim(),name:n.name,phone:n.phone,city:n.city,subscription_type:"free",email_verified:!1,phone_verified:!1,login_count:0,auth_provider:"email",preferences:{language:"ar",notifications:{email:!0,sms:!1,push:!0,marketing:!1},privacy:{profile_visibility:"private",data_sharing:!1,analytics:!0}}}]);return h?(console.error("Profile creation error:",h),{success:!1,error:"خطأ في إنشاء الملف الشخصي"}):(this.logSecurityEvent("user_registered",a.user.id),{success:!0})}return{success:!1,error:"فشل في إنشاء الحساب"}}catch(s){return console.error("Sign up error:",s),{success:!1,error:s.message||"حدث خطأ غير متوقع"}}}async signIn(e,t){try{if(!vr.isAllowed(e)){const n=Math.ceil((vr.getResetTime(e)-Date.now())/6e4);return this.logSecurityEvent("rate_limit_exceeded",{email:e}),{success:!1,error:`تم تجاوز عدد المحاولات المسموح. حاول مرة أخرى خلال ${n} دقيقة`}}const{data:r,error:s}=await _e.auth.signInWithPassword({email:e.toLowerCase().trim(),password:t});if(s)return this.logSecurityEvent("login_failed",{email:e,error:s.message}),{success:!1,error:this.getLocalizedAuthError(s.message)};if(r.user){await this.updateLoginStats(r.user.id);const n=await this.fetchUserProfile(r.user.id);return this.logSecurityEvent("user_signed_in",r.user.id),{success:!0,user:n}}return{success:!1,error:"فشل في تسجيل الدخول"}}catch(r){return console.error("Sign in error:",r),{success:!1,error:r.message||"خطأ في تسجيل الدخول"}}}async signOut(){var e,t;try{const r=(t=(e=this.currentSession)==null?void 0:e.user)==null?void 0:t.id,{error:s}=await _e.auth.signOut();if(s)throw s;this.currentSession=null,Ne.clearSensitiveData(window),this.clearLocalStorage(),this.logSecurityEvent("user_signed_out",r)}catch(r){throw console.error("Sign out error:",r),r}}async refreshSession(){try{const{data:e,error:t}=await _e.auth.refreshSession();if(t)throw t;if(e.session){const r=await this.fetchUserProfile(e.session.user.id);return this.currentSession={user:r,access_token:e.session.access_token,refresh_token:e.session.refresh_token,expires_at:e.session.expires_at||0,token_type:e.session.token_type||"bearer"},this.logSecurityEvent("session_refreshed",e.session.user.id),{success:!0,session:this.currentSession}}return{success:!1}}catch(e){return console.error("Session refresh error:",e),await this.signOut(),{success:!1}}}async updateProfile(e){var t;try{if(!((t=this.currentSession)!=null&&t.user))return{success:!1,error:"لم يتم تسجيل الدخول"};const r={...e,name:e.name?Ne.sanitizeInput(e.name):void 0,phone:e.phone?e.phone.replace(/\D/g,""):void 0,updated_at:new Date().toISOString()};if(r.phone&&!Ne.validateSaudiPhone(r.phone))return{success:!1,error:"رقم جوال سعودي غير صحيح"};const{data:s,error:n}=await _e.from("users").update(r).eq("id",this.currentSession.user.id).select().single();if(n)throw n;return this.currentSession.user={...this.currentSession.user,...s},this.logSecurityEvent("profile_updated",this.currentSession.user.id),{success:!0,user:this.currentSession.user}}catch(r){return console.error("Update profile error:",r),{success:!1,error:"خطأ في تحديث الملف الشخصي"}}}async changePassword(e,t){var r,s;try{const n=Ne.validatePassword(t);if(!n.isValid)return{success:!1,error:`كلمة المرور الجديدة ضعيفة: ${n.feedback.join(", ")}`};const{error:a}=await _e.auth.updateUser({password:t});if(a)throw a;return this.logSecurityEvent("password_changed",(s=(r=this.currentSession)==null?void 0:r.user)==null?void 0:s.id),{success:!0}}catch(n){return console.error("Change password error:",n),{success:!1,error:"خطأ في تغيير كلمة المرور"}}}async deleteAccount(){var e;try{if(!((e=this.currentSession)!=null&&e.user))return{success:!1,error:"لم يتم تسجيل الدخول"};const t=this.currentSession.user.id,{error:r}=await _e.from("users").delete().eq("id",t);if(r)throw r;return this.logSecurityEvent("account_deleted",t),await this.signOut(),{success:!0}}catch(t){return console.error("Delete account error:",t),{success:!1,error:"خطأ في حذف الحساب"}}}async fetchUserProfile(e){const{data:t,error:r}=await _e.from("users").select("*").eq("id",e).single();if(r)throw r;return t}async updateLoginStats(e){try{await _e.from("users").update({last_login:new Date().toISOString(),login_count:_e.sql`login_count + 1`}).eq("id",e)}catch(t){console.warn("Failed to update login stats:",t)}}validateSignUpData(e,t,r){if(!Ne.validateEmail(e))return{isValid:!1,error:"بريد إلكتروني غير صحيح"};const s=Ne.validatePassword(t);return s.isValid?Ne.validateSaudiPhone(r.phone)?!r.name||r.name.trim().length<2?{isValid:!1,error:"الاسم يجب أن يكون حرفين على الأقل"}:{isValid:!0}:{isValid:!1,error:"رقم جوال سعودي غير صحيح"}:{isValid:!1,error:`كلمة المرور ضعيفة: ${s.feedback.join(", ")}`}}getLocalizedAuthError(e){return{"Invalid login credentials":"بيانات تسجيل الدخول غير صحيحة","Email already registered":"هذا البريد الإلكتروني مسجل مسبقاً","Password should be at least 6 characters":"كلمة المرور يجب أن تكون 6 أحرف على الأقل","Invalid email":"بريد إلكتروني غير صحيح","Signup requires a valid password":"كلمة المرور مطلوبة","User not found":"المستخدم غير موجود","Invalid password":"كلمة المرور غير صحيحة"}[e]||e}async logSecurityEvent(e,t,r){try{await _e.from("audit_logs").insert([{user_id:t||null,action:e,table_name:"auth_events",new_data:{timestamp:new Date().toISOString(),user_agent:navigator.userAgent,ip_address:"client",event_type:e,details:r||{}}}])}catch(s){console.warn("Failed to log security event:",s)}}clearLocalStorage(){const e=["theme","language"];Object.keys(localStorage).forEach(r=>{e.includes(r)||localStorage.removeItem(r)}),sessionStorage.clear()}getCurrentSession(){return this.currentSession}getCurrentUser(){var e;return((e=this.currentSession)==null?void 0:e.user)||null}isAuthenticated(){var e;return!!((e=this.currentSession)!=null&&e.user)}destroy(){this.sessionCheckInterval&&clearInterval(this.sessionCheckInterval),this.currentSession=null}};et(At,"instance");let $s=At;const nt=$s.getInstance(),In=q.createContext(void 0),Cc=()=>{const i=q.useContext(In);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i},Bc=()=>{const[i,e]=q.useState(null),[t,r]=q.useState(!0);q.useEffect(()=>{(async()=>{try{const{data:{session:A}}=await _e.auth.getSession();A!=null&&A.user&&await s(A.user.id)}catch(A){console.error("Session check error:",A)}finally{r(!1)}})();const{data:{subscription:y}}=_e.auth.onAuthStateChange(async(A,m)=>{var g;try{A==="SIGNED_IN"&&(m!=null&&m.user)?(await s(m.user.id),_("user_signed_in",m.user.id)):A==="SIGNED_OUT"?(e(null),_("user_signed_out"),Ne.clearSensitiveData(window)):A==="TOKEN_REFRESHED"&&_("token_refreshed",(g=m==null?void 0:m.user)==null?void 0:g.id)}catch(E){console.error("Auth state change error:",E)}});return()=>y.unsubscribe()},[]);const s=async w=>{try{const{data:y,error:A}=await _e.from("users").select("*").eq("id",w).single();if(A)throw A;e(y)}catch(y){console.error("Error fetching user profile:",y),ye.error("خطأ في تحميل بيانات المستخدم")}},n=async(w,y,A)=>{try{r(!0);const m=await nt.signUp(w,y,A);return m.success?(ye.success("تم إنشاء حسابك بنجاح!"),!0):(ye.error(m.error||"خطأ في إنشاء الحساب"),!1)}catch(m){return console.error("Sign up error:",m),ye.error(m.message||"حدث خطأ في إنشاء الحساب"),!1}finally{r(!1)}},a=async(w,y)=>{try{r(!0);const A=await nt.signIn(w,y);return A.success?(ye.success("تم تسجيل الدخول بنجاح!"),!0):(ye.error(A.error||"خطأ في تسجيل الدخول"),!1)}catch(A){return console.error("Sign in error:",A),ye.error(A.message||"خطأ في تسجيل الدخول"),!1}finally{r(!1)}},o=async()=>{try{r(!0);const w=await nt.signInWithGoogle();return w.success?(ye.success("جاري تسجيل الدخول عبر Google..."),!0):(ye.error(w.error||"خطأ في تسجيل الدخول عبر Google"),!1)}catch(w){return console.error("Google sign in error:",w),ye.error(w.message||"خطأ في تسجيل الدخول عبر Google"),!1}finally{r(!1)}},h=async()=>{try{r(!0);const w=await nt.signInWithApple();return w.success?(ye.success("جاري تسجيل الدخول عبر Apple..."),!0):(ye.error(w.error||"خطأ في تسجيل الدخول عبر Apple"),!1)}catch(w){return console.error("Apple sign in error:",w),ye.error(w.message||"خطأ في تسجيل الدخول عبر Apple"),!1}finally{r(!1)}},u=async()=>{try{await nt.signOut(),e(null),ye.success("تم تسجيل الخروج بنجاح")}catch(w){console.error("Sign out error:",w),ye.error("خطأ في تسجيل الخروج")}},d=async w=>{try{const y=await nt.updateProfile(w);return y.success&&y.user?(e(y.user),ye.success("تم تحديث الملف الشخصي"),!0):(ye.error(y.error||"خطأ في تحديث الملف الشخصي"),!1)}catch(y){return console.error("Update profile error:",y),ye.error("خطأ في تحديث الملف الشخصي"),!1}},f=async(w,y)=>{try{const A=await nt.changePassword(w,y);return A.success?(ye.success("تم تغيير كلمة المرور بنجاح"),!0):(ye.error(A.error||"خطأ في تغيير كلمة المرور"),!1)}catch(A){return console.error("Change password error:",A),ye.error("خطأ في تغيير كلمة المرور"),!1}},p=async()=>{try{const w=await nt.deleteAccount();return w.success?(e(null),ye.success("تم حذف الحساب بنجاح"),!0):(ye.error(w.error||"خطأ في حذف الحساب"),!1)}catch(w){return console.error("Delete account error:",w),ye.error("خطأ في حذف الحساب"),!1}},v=async()=>{try{const w=await nt.refreshSession();w.success&&w.session&&e(w.session.user)}catch(w){console.error("Session refresh error:",w),await u()}},_=async(w,y)=>{try{await _e.from("audit_logs").insert([{user_id:y||null,action:w,table_name:"auth_events",new_data:{timestamp:new Date().toISOString(),user_agent:navigator.userAgent,ip_address:"client",event_type:w}}])}catch(A){console.warn("Failed to log security event:",A)}};return q.useEffect(()=>{const w=setInterval(async()=>{const{data:{session:y}}=await _e.auth.getSession();if(y&&i){const A=new Date(y.expires_at*1e3),m=new Date,g=A.getTime()-m.getTime();g<3e5&&g>0&&await v()}},6e4);return()=>clearInterval(w)},[i]),{user:i,loading:t,signUp:n,signIn:a,signInWithGoogle:o,signInWithApple:h,signOut:u,updateProfile:d,changePassword:f,deleteAccount:p,refreshSession:v}},Dc=({children:i})=>{const e=Bc();return W.jsxDEV(In.Provider,{value:e,children:i},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/AuthProvider.tsx",lineNumber:12,columnNumber:5},void 0)},kc=q.lazy(()=>se(()=>import("./Header-C3kA2NZb.js"),__vite__mapDeps([0,1,2,3,4]))),Sc=q.lazy(()=>se(()=>import("./HeroSection-DYOCj8nT.js"),__vite__mapDeps([5,1,6,2,3,4]))),Fc=q.lazy(()=>se(()=>import("./FeaturesSection-Ez5gPgAz.js"),__vite__mapDeps([7,1,2,3,4]))),jc=q.lazy(()=>se(()=>import("./HowItWorksSection-BU6N1Uv0.js"),__vite__mapDeps([8,2,1,3,4]))),Tc=q.lazy(()=>se(()=>import("./VoiceInteractionSection-DZkEsT_L.js"),__vite__mapDeps([9,1,6,2,3,4]))),Rc=q.lazy(()=>se(()=>import("./SolutionsSection-D2AGDMcP.js"),__vite__mapDeps([10,1,2,3,4]))),Pc=q.lazy(()=>se(()=>import("./SectorsSection-JEqXBjh6.js"),__vite__mapDeps([11,2,1,3,4]))),Ic=q.lazy(()=>se(()=>import("./TrustSection-BZCu4ssL.js"),__vite__mapDeps([12,2,1,3,4]))),Oc=q.lazy(()=>se(()=>import("./VoiceButton-BAeeFQxG.js"),__vite__mapDeps([13,1,2,3,4]))),Uc=q.lazy(()=>se(()=>import("./ProjectFlow-D-wy3iZy.js"),__vite__mapDeps([14,1,15,16,3,2,4]))),Nc=q.lazy(()=>se(()=>import("./Dashboard-ot-w9VQJ.js"),__vite__mapDeps([17,1,15,3,2,18,19,20,4]))),$c=q.lazy(()=>se(()=>import("./AnalysisResults-CBYAbuFd.js"),__vite__mapDeps([21,1,2,3,18,19,20,22,4]))),Lc=q.lazy(()=>se(()=>import("./PricingPlans-BsovSuaD.js"),__vite__mapDeps([23,2,1,3,4]))),zc=q.lazy(()=>se(()=>import("./AuthModal-B95GFGHG.js"),__vite__mapDeps([24,1,4,2,3]))),Hc=q.lazy(()=>se(()=>import("./HelpCenter-g9tkbAyt.js"),__vite__mapDeps([25,1,3,4,2]))),qc=q.lazy(()=>se(()=>import("./UserProfile-VxKoIVGb.js"),__vite__mapDeps([26,1,3,2,4]))),Wc=q.lazy(()=>se(()=>import("./NotificationCenter-DaiOMKjO.js"),__vite__mapDeps([27,1,2,3,4]))),Qi=q.lazy(()=>se(()=>import("./LoadingScreen-DLQKArKx.js"),__vite__mapDeps([28,1,2,3,4]))),Mc=q.lazy(()=>se(()=>import("./Footer-BMopYdOT.js"),__vite__mapDeps([29,3,1,4,2]))),Vc=q.lazy(()=>se(()=>import("./ErrorBoundary-DEkwTBv_.js"),__vite__mapDeps([30,1,3,4,2]))),Yt=q.lazy(()=>se(()=>import("./ProtectedRoute-Ceoqm7OX.js"),__vite__mapDeps([31,28,1,2,3,4]))),Kc=q.lazy(()=>se(()=>import("./AdminRoute-BYoqi2b8.js"),__vite__mapDeps([32,28,1,2,3,4]))),Gc=q.lazy(()=>se(()=>import("./AdminDashboard-CP5PYsEQ.js"),__vite__mapDeps([33,1,3,2,18,22,20,4]))),Yc=q.lazy(()=>se(()=>import("./DataPrivacyModal-gy6tzUXB.js"),__vite__mapDeps([34,3,1,4,2]))),Jc=q.lazy(()=>se(()=>import("./SecurityBadge-BLj8_3Oc.js"),__vite__mapDeps([35,3,1,4,2]))),Xc=q.lazy(()=>se(()=>import("./SystemStatus-BukzRCu7.js"),__vite__mapDeps([36,1,2,3,4]))),Qc=q.lazy(()=>se(()=>import("./VoiceGreeting-zPo-4-8T.js"),__vite__mapDeps([37,1,2,3,4]))),Zc=q.lazy(()=>se(()=>import("./SectorPage-DawSlItR.js"),__vite__mapDeps([38,1,2,3,18,19,4]))),el=q.lazy(()=>se(()=>import("./LocationAnalysisPage-D2M4MaaR.js"),__vite__mapDeps([39,1,16,3,2,4]))),tl=q.lazy(()=>se(()=>import("./BlogIndex-36THvQkZ.js"),__vite__mapDeps([40,1,2,3,4]))),rl=q.lazy(()=>se(()=>import("./BlogPostPage-Bw7Aqfk-.js"),__vite__mapDeps([41,1,4,2,3])));function sl(){const[i,e]=q.useState("home"),[t,r]=q.useState(""),[s,n]=q.useState(""),[a,o]=q.useState(!1),[h,u]=q.useState(!1),[d,f]=q.useState("login"),[p,v]=q.useState(!1),[_,w]=q.useState(!1),[y,A]=q.useState(!1),[m,g]=q.useState(0),[E,k]=q.useState(navigator.onLine),{user:D,loading:F}=Cc(),[P,H]=q.useState([{id:"1",title:"تطبيق توصيل طعام صحي",description:"تطبيق لتوصيل الوجبات الصحية والعضوية للعائلات في الرياض",type:"tech",city:"الرياض",goal:"development",status:"completed",createdAt:new Date("2024-01-15")},{id:"2",title:"متجر إلكتروني للمنتجات اليدوية",description:"منصة لبيع المنتجات اليدوية السعودية التراثية",type:"commercial",city:"جدة",goal:"funding",status:"analyzing",createdAt:new Date("2024-01-20")},{id:"3",title:"مركز تدريب مهني متخصص",description:"مركز لتدريب الشباب على المهارات التقنية والمهنية",type:"service",city:"الدمام",goal:"analysis",status:"saved",createdAt:new Date("2024-02-01")}]),S={feasibility:{swot:"نقاط القوة: تزايد الطلب على الطعام الصحي بنسبة 25% سنوياً، دعم الحكومة للمشاريع التقنية، خبرة الفريق في التطوير. الفرص: السوق السعودي ينمو بقوة، إمكانية التوسع للخليج. نقاط الضعف: المنافسة الشديدة مع اللاعبين الكبار، التكاليف العالية للتسويق الأولي. التهديدات: تغيير سلوك المستهلكين، التحديات اللوجستية.",market:"السوق السعودي لتوصيل الطعام يقدر بـ 2.8 مليار ريال وينمو بمعدل 15% سنوياً. الرياض تمثل 35% من السوق، تليها جدة بـ 25%. الجمهور المستهدف: العائلات الشابة (25-45 سنة) ذات الدخل المتوسط والعالي. حجم السوق المتاح: 1.2 مليون عائلة في المدن الرئيسية.",costs:"التكلفة الإجمالية للبدء: 750,000 ريال موزعة كالتالي: تطوير التطبيق (300,000 ريال)، التسويق الأولي (200,000 ريال)، رأس المال التشغيلي (150,000 ريال)، المعدات واللوجستيات (100,000 ريال). التكاليف الشهرية: 85,000 ريال شاملة الرواتب والتشغيل.",profitability:"العائد المتوقع: 22-28% خلال السنة الثانية. نقطة التعادل متوقعة خلال الشهر 16-18. الإيرادات المتوقعة: السنة الأولى 1.2 مليون ريال، السنة الثانية 2.8 مليون ريال، السنة الثالثة 4.5 مليون ريال. هامش الربح الإجمالي: 35-40%."},marketing:{campaigns:"استراتيجية تسويقية متعددة القنوات: (1) التسويق الرقمي عبر سناب شات وانستقرام بميزانية 50,000 ريال شهرياً، (2) شراكات مع المؤثرين الصحيين (20 مؤثر متوسط)، (3) حملات جوجل وفيسبوك مستهدفة، (4) فعاليات ترويجية في المجمعات التجارية، (5) برنامج إحالة العملاء مع مكافآت.",audience:"الجمهور الأساسي: العائلات الشابة (25-45 سنة) في الرياض وجدة، دخل شهري 8,000+ ريال، يستخدمون التطبيقات بانتظام. الجمهور الثانوي: المهنيين المشغولين، كبار السن الذين يفضلون الطعام الصحي. خصائص ديموغرافية: 60% إناث، 40% ذكور، 70% متزوجون مع أطفال.",platforms:"المنصات الرئيسية: سناب شات (الأولوية العليا للجمهور السعودي)، انستقرام (للمحتوى المرئي)، تيك توك (للجيل الجديد)، تويتر (للتفاعل المباشر). المنصات الثانوية: يوتيوب (للمحتوى التعليمي)، لينكد إن (للشراكات B2B)، واتساب بزنس (لخدمة العملاء)."},financial:{cashFlow:"توقعات التدفق النقدي الشهري: الشهور 1-6: سالب 45,000 ريال (فترة البناء)، الشهور 7-12: موجب 15,000 ريال، السنة الثانية: موجب 85,000 ريال شهرياً. ذروة الاحتياج للسيولة: 400,000 ريال في الشهر الرابع. مصادر التمويل المقترحة: 40% رأس مال ذاتي، 35% تمويل بنكي، 25% مستثمرين.",breakeven:"نقطة التعادل التشغيلي: 2,800 طلب شهرياً بمتوسط قيمة 45 ريال للطلب. نقطة التعادل المالي الكامل: الشهر 17 من بداية العمليات. العوامل المؤثرة: متوسط قيمة الطلب، تكلفة اكتساب العميل (85 ريال)، معدل الاحتفاظ بالعملاء (65% شهرياً)."},esg:{sustainability:"المشروع يركز على الاستدامة البيئية من خلال: (1) استخدام التغليف القابل للتدوير 100%، (2) تقليل النفايات الغذائية بنسبة 40% من خلال التنبؤ الذكي، (3) شراكة مع المزارع المحلية لتقليل البصمة الكربونية، (4) استخدام المركبات الكهربائية للتوصيل تدريجياً، (5) برنامج إعادة تدوير العبوات مع نقاط مكافآت للعملاء.",social:"المسؤولية الاجتماعية تشمل: (1) توظيف 70% من الشباب السعودي، (2) دعم المزارعين المحليين بشراء 80% من المنتجات محلياً، (3) برنامج وجبات مجانية للأسر المحتاجة (100 وجبة شهرياً)، (4) تدريب الشباب على مهارات التوصيل وخدمة العملاء، (5) دعم المشاريع الصغيرة للطهاة المنزليين."}};q.useEffect(()=>{const j=()=>k(!0),I=()=>k(!1);return window.addEventListener("online",j),window.addEventListener("offline",I),()=>{window.removeEventListener("online",j),window.removeEventListener("offline",I)}},[]),q.useEffect(()=>{const j=()=>{const $=window.location.hash.replace("#","");$&&$!==i&&K($)};return j(),window.addEventListener("hashchange",j),(async()=>{const $=new URLSearchParams(window.location.search),L=$.get("access_token");if($.get("refresh_token"),L)try{const oe=await authService.handleOAuthCallback();oe.success?(toast.success("تم تسجيل الدخول بنجاح!"),window.history.replaceState({},document.title,window.location.pathname),e("dashboard")):toast.error(oe.error||"خطأ في تسجيل الدخول")}catch(oe){console.error("OAuth callback error:",oe),toast.error("خطأ في معالجة تسجيل الدخول")}})(),()=>{window.removeEventListener("hashchange",j)}},[]);const R=j=>{A(!0),g(0);const I=setInterval(()=>{g($=>$>=100?(clearInterval(I),A(!1),e("flow"),100):$+10)},300)},N=()=>{if(!D){f("register"),u(!0);return}e("flow")},O=()=>{if(!D){f("register"),u(!0);return}e("flow")},V=j=>{e("results")},K=j=>{switch(o(!1),v(!1),window.location.hash=j,j){case"home":e("home");break;case"dashboard":if(!D){f("login"),u(!0);return}e("dashboard");break;case"pricing":e("pricing");break;case"help":e("help");break;case"profile":if(!D){f("login"),u(!0);return}e("profile");break;case"login":f("login"),u(!0);break;case"register":f("register"),u(!0);break;case"flow":if(!D){f("register"),u(!0);return}e("flow");break;case"privacy":w(!0);break;case"admin":if(!D){f("login"),u(!0);return}e("admin");break;case"results":e("results");break;case"sector":e("sector");break;case"location-analysis":if(!D){f("register"),u(!0);return}e("location-analysis");break;case"blog":e("blog");break;default:e("home")}},J=()=>{u(!1),e("flow")},ue=j=>{switch(j){case"feasibility":case"marketing":case"naming":D?e("flow"):(f("register"),u(!0));break;default:e("home")}},ee=j=>{r(j),e("sector")},ce=j=>{n(j),e("post")},ie=()=>{switch(i){case"flow":return W.jsxDEV(Yt,{children:W.jsxDEV(Uc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:330,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:329,columnNumber:11},this);case"dashboard":return W.jsxDEV(Yt,{children:W.jsxDEV(Nc,{projects:P,onProjectSelect:V},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:336,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:335,columnNumber:11},this);case"results":return W.jsxDEV(Yt,{children:W.jsxDEV($c,{analysis:S,projectTitle:"تطبيق توصيل طعام صحي"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:342,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:341,columnNumber:11},this);case"pricing":return W.jsxDEV(Lc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:346,columnNumber:16},this);case"help":return W.jsxDEV(Hc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:348,columnNumber:16},this);case"profile":return W.jsxDEV(Yt,{children:W.jsxDEV(qc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:352,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:351,columnNumber:11},this);case"admin":return W.jsxDEV(Kc,{children:W.jsxDEV(Gc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:358,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:357,columnNumber:11},this);default:return W.jsxDEV(W.Fragment,{children:[W.jsxDEV(Sc,{onStartVoice:N,onStartText:O},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:364,columnNumber:13},this),W.jsxDEV(Fc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:368,columnNumber:13},this),W.jsxDEV(Tc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:369,columnNumber:13},this),W.jsxDEV(jc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:370,columnNumber:13},this),W.jsxDEV(Rc,{onSectorSelect:ee},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:371,columnNumber:13},this),W.jsxDEV(Pc,{onSectorSelect:ee},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:372,columnNumber:13},this),W.jsxDEV(Ic,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:373,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:363,columnNumber:11},this);case"sector":return W.jsxDEV(Zc,{sectorName:t,onBack:()=>e("home")},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:377,columnNumber:16},this);case"location-analysis":return W.jsxDEV(Yt,{children:W.jsxDEV(el,{onBack:()=>e("home")},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:381,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:380,columnNumber:11},this);case"blog":return W.jsxDEV(tl,{onOpenPost:ce},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:385,columnNumber:16},this);case"post":return W.jsxDEV(rl,{slug:s,onBack:()=>e("blog")},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:387,columnNumber:16},this)}};return F?W.jsxDEV(Qi,{message:"جاري تحميل التطبيق...",showDetails:!0},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:392,columnNumber:12},this):W.jsxDEV(q.Suspense,{fallback:W.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:"جار التحميل..."},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:396,columnNumber:25},this),children:W.jsxDEV(Vc,{children:W.jsxDEV("div",{className:"min-h-screen bg-gray-50 font-almarai",children:[W.jsxDEV(Qc,{onActionSelect:ue},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:400,columnNumber:9},this),W.jsxDEV(lr,{children:!E&&W.jsxDEV(Kt.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-0 left-0 right-0 bg-red-500 text-white p-3 text-center z-50",children:W.jsxDEV("p",{className:"font-almarai font-bold",children:"⚠️ لا يوجد اتصال بالإنترنت - بعض الميزات قد لا تعمل"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:411,columnNumber:15},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:405,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:403,columnNumber:9},this),W.jsxDEV(lr,{children:y&&W.jsxDEV(Qi,{message:"جاري تحليل مشروعك...",progress:m,showDetails:!0},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:421,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:419,columnNumber:9},this),W.jsxDEV(kc,{onMenuClick:()=>o(!a),onNavigate:K,onNotificationClick:()=>v(!0),isLoggedIn:!!D},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:429,columnNumber:9},this),W.jsxDEV(lr,{children:a&&W.jsxDEV(Kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 lg:hidden",children:[W.jsxDEV("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>o(!1)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:445,columnNumber:15},this),W.jsxDEV(Kt.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 right-0 w-80 h-full bg-white shadow-2xl",children:[W.jsxDEV("div",{className:"p-6 border-b border-gray-200",children:W.jsxDEV("div",{children:[W.jsxDEV("h2",{className:"font-almarai font-bold text-gray-800 text-xl",children:"SmartStartAI"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:455,columnNumber:21},this),W.jsxDEV("p",{className:"text-gray-600 font-almarai text-sm",children:"مستشارك الذكي"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:456,columnNumber:21},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:454,columnNumber:19},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:453,columnNumber:17},this),W.jsxDEV("nav",{className:"p-6 space-y-4",children:[[{id:"home",label:"الرئيسية",icon:"🏠"},{id:"flow",label:"بدء مشروع جديد",icon:"🎤"},{id:"dashboard",label:"مشاريعي",icon:"📊",requireAuth:!0},{id:"pricing",label:"الاشتراكات",icon:"💳"},{id:"help",label:"المساعدة",icon:"❓"},{id:"profile",label:"الملف الشخصي",icon:"👤",requireAuth:!0},{id:"admin",label:"لوحة الأدمن",icon:"🛡️",requireAuth:!0,adminOnly:!0},{id:"privacy",label:"الخصوصية",icon:"🔒"}].map(j=>{var I;return j.requireAuth&&!D||j.adminOnly&&(!D||D.subscription_type!=="enterprise"&&!((I=D.email)!=null&&I.includes("admin")))?null:W.jsxDEV(Kt.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>K(j.id),className:"flex items-center gap-4 w-full p-4 text-right font-almarai text-lg hover:bg-light-green hover:text-saudi-green rounded-xl transition-all duration-300",children:[W.jsxDEV("span",{className:"text-2xl",children:j.icon},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:482,columnNumber:25},this),W.jsxDEV("span",{className:"flex-1",children:j.label},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:483,columnNumber:25},this)]},j.id,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:475,columnNumber:23},this)}),W.jsxDEV("div",{className:"border-t border-gray-200 pt-4 mt-6",children:D?W.jsxDEV("div",{className:"space-y-3",children:[W.jsxDEV("div",{className:"text-center p-3 bg-light-green rounded-xl",children:[W.jsxDEV("p",{className:"font-almarai font-bold text-saudi-green",children:["مرحباً ",D.name]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:507,columnNumber:27},this),W.jsxDEV("p",{className:"text-sm font-almarai text-gray-600",children:["باقة ",D.subscription_type==="free"?"مجانية":D.subscription_type==="growth"?"النمو":"المؤسسات"]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:510,columnNumber:27},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:506,columnNumber:25},this),W.jsxDEV(Jc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:515,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:505,columnNumber:23},this):W.jsxDEV("div",{className:"space-y-3",children:[W.jsxDEV("button",{onClick:()=>K("login"),className:"w-full bg-saudi-green text-white py-3 rounded-xl font-almarai font-bold",children:"تسجيل الدخول"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:491,columnNumber:25},this),W.jsxDEV("button",{onClick:()=>K("register"),className:"w-full border-2 border-saudi-green text-saudi-green py-3 rounded-xl font-almarai font-bold",children:"إنشاء حساب"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:497,columnNumber:25},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:490,columnNumber:23},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:488,columnNumber:19},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:460,columnNumber:17},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:446,columnNumber:15},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:439,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:437,columnNumber:9},this),W.jsxDEV("main",{id:"main",children:W.jsxDEV(lr,{mode:"wait",children:W.jsxDEV(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:ie()},i,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:528,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:527,columnNumber:11},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:526,columnNumber:9},this),(i==="home"||i==="flow")&&W.jsxDEV(Oc,{onVoiceInput:R},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:542,columnNumber:11},this),i==="home"&&W.jsxDEV(Mc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:546,columnNumber:36},this),W.jsxDEV(Xc,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:549,columnNumber:9},this),W.jsxDEV(zc,{isOpen:h,onClose:()=>u(!1),mode:d,onModeChange:f,onSuccess:J},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:552,columnNumber:9},this),W.jsxDEV(Wc,{isOpen:p,onClose:()=>v(!1)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:560,columnNumber:9},this),W.jsxDEV(Yc,{isOpen:_,onClose:()=>w(!1)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:565,columnNumber:9},this),W.jsxDEV(Uo,{position:"top-center",toastOptions:{duration:4e3,style:{fontFamily:"Almarai",direction:"rtl",textAlign:"right"},success:{style:{background:"#10B981",color:"white"}},error:{style:{background:"#EF4444",color:"white"}}}},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:571,columnNumber:9},this)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:398,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:397,columnNumber:5},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:396,columnNumber:5},this)}function il(){return W.jsxDEV(Dc,{children:W.jsxDEV(sl,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:603,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/App.tsx",lineNumber:602,columnNumber:5},this)}var On={},Sr={};Sr.byteLength=al;Sr.toByteArray=ll;Sr.fromByteArray=dl;var rt=[],qe=[],nl=typeof Uint8Array<"u"?Uint8Array:Array,Es="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var It=0,ol=Es.length;It<ol;++It)rt[It]=Es[It],qe[Es.charCodeAt(It)]=It;qe[45]=62;qe[95]=63;function Un(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function al(i){var e=Un(i),t=e[0],r=e[1];return(t+r)*3/4-r}function cl(i,e,t){return(e+t)*3/4-t}function ll(i){var e,t=Un(i),r=t[0],s=t[1],n=new nl(cl(i,r,s)),a=0,o=s>0?r-4:r,h;for(h=0;h<o;h+=4)e=qe[i.charCodeAt(h)]<<18|qe[i.charCodeAt(h+1)]<<12|qe[i.charCodeAt(h+2)]<<6|qe[i.charCodeAt(h+3)],n[a++]=e>>16&255,n[a++]=e>>8&255,n[a++]=e&255;return s===2&&(e=qe[i.charCodeAt(h)]<<2|qe[i.charCodeAt(h+1)]>>4,n[a++]=e&255),s===1&&(e=qe[i.charCodeAt(h)]<<10|qe[i.charCodeAt(h+1)]<<4|qe[i.charCodeAt(h+2)]>>2,n[a++]=e>>8&255,n[a++]=e&255),n}function ul(i){return rt[i>>18&63]+rt[i>>12&63]+rt[i>>6&63]+rt[i&63]}function hl(i,e,t){for(var r,s=[],n=e;n<t;n+=3)r=(i[n]<<16&16711680)+(i[n+1]<<8&65280)+(i[n+2]&255),s.push(ul(r));return s.join("")}function dl(i){for(var e,t=i.length,r=t%3,s=[],n=16383,a=0,o=t-r;a<o;a+=n)s.push(hl(i,a,a+n>o?o:a+n));return r===1?(e=i[t-1],s.push(rt[e>>2]+rt[e<<4&63]+"==")):r===2&&(e=(i[t-2]<<8)+i[t-1],s.push(rt[e>>10]+rt[e>>4&63]+rt[e<<2&63]+"=")),s.join("")}var Ys={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ys.read=function(i,e,t,r,s){var n,a,o=s*8-r-1,h=(1<<o)-1,u=h>>1,d=-7,f=t?s-1:0,p=t?-1:1,v=i[e+f];for(f+=p,n=v&(1<<-d)-1,v>>=-d,d+=o;d>0;n=n*256+i[e+f],f+=p,d-=8);for(a=n&(1<<-d)-1,n>>=-d,d+=r;d>0;a=a*256+i[e+f],f+=p,d-=8);if(n===0)n=1-u;else{if(n===h)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,r),n=n-u}return(v?-1:1)*a*Math.pow(2,n-r)};Ys.write=function(i,e,t,r,s,n){var a,o,h,u=n*8-s-1,d=(1<<u)-1,f=d>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:n-1,_=r?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+f>=1?e+=p/h:e+=p*Math.pow(2,1-f),e*h>=2&&(a++,h/=2),a+f>=d?(o=0,a=d):a+f>=1?(o=(e*h-1)*Math.pow(2,s),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;i[t+v]=o&255,v+=_,o/=256,s-=8);for(a=a<<s|o,u+=s;u>0;i[t+v]=a&255,v+=_,a/=256,u-=8);i[t+v-_]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=Sr,t=Ys,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=o,i.SlowBuffer=m,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s,o.TYPED_ARRAY_SUPPORT=n(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{const x=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(x,c),x.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(x){if(x>s)throw new RangeError('The value "'+x+'" is invalid for option "size"');const c=new Uint8Array(x);return Object.setPrototypeOf(c,o.prototype),c}function o(x,c,l){if(typeof x=="number"){if(typeof c=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return h(x,c,l)}o.poolSize=8192;function h(x,c,l){if(typeof x=="string")return p(x,c);if(ArrayBuffer.isView(x))return _(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(xe(x,ArrayBuffer)||x&&xe(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(x,SharedArrayBuffer)||x&&xe(x.buffer,SharedArrayBuffer)))return w(x,c,l);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=x.valueOf&&x.valueOf();if(b!=null&&b!==x)return o.from(b,c,l);const B=y(x);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return o.from(x[Symbol.toPrimitive]("string"),c,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}o.from=function(x,c,l){return h(x,c,l)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function d(x,c,l){return u(x),x<=0?a(x):c!==void 0?typeof l=="string"?a(x).fill(c,l):a(x).fill(c):a(x)}o.alloc=function(x,c,l){return d(x,c,l)};function f(x){return u(x),a(x<0?0:A(x)|0)}o.allocUnsafe=function(x){return f(x)},o.allocUnsafeSlow=function(x){return f(x)};function p(x,c){if((typeof c!="string"||c==="")&&(c="utf8"),!o.isEncoding(c))throw new TypeError("Unknown encoding: "+c);const l=g(x,c)|0;let b=a(l);const B=b.write(x,c);return B!==l&&(b=b.slice(0,B)),b}function v(x){const c=x.length<0?0:A(x.length)|0,l=a(c);for(let b=0;b<c;b+=1)l[b]=x[b]&255;return l}function _(x){if(xe(x,Uint8Array)){const c=new Uint8Array(x);return w(c.buffer,c.byteOffset,c.byteLength)}return v(x)}function w(x,c,l){if(c<0||x.byteLength<c)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<c+(l||0))throw new RangeError('"length" is outside of buffer bounds');let b;return c===void 0&&l===void 0?b=new Uint8Array(x):l===void 0?b=new Uint8Array(x,c):b=new Uint8Array(x,c,l),Object.setPrototypeOf(b,o.prototype),b}function y(x){if(o.isBuffer(x)){const c=A(x.length)|0,l=a(c);return l.length===0||x.copy(l,0,0,c),l}if(x.length!==void 0)return typeof x.length!="number"||Ie(x.length)?a(0):v(x);if(x.type==="Buffer"&&Array.isArray(x.data))return v(x.data)}function A(x){if(x>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return x|0}function m(x){return+x!=x&&(x=0),o.alloc(+x)}o.isBuffer=function(c){return c!=null&&c._isBuffer===!0&&c!==o.prototype},o.compare=function(c,l){if(xe(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),xe(l,Uint8Array)&&(l=o.from(l,l.offset,l.byteLength)),!o.isBuffer(c)||!o.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(c===l)return 0;let b=c.length,B=l.length;for(let T=0,U=Math.min(b,B);T<U;++T)if(c[T]!==l[T]){b=c[T],B=l[T];break}return b<B?-1:B<b?1:0},o.isEncoding=function(c){switch(String(c).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(c,l){if(!Array.isArray(c))throw new TypeError('"list" argument must be an Array of Buffers');if(c.length===0)return o.alloc(0);let b;if(l===void 0)for(l=0,b=0;b<c.length;++b)l+=c[b].length;const B=o.allocUnsafe(l);let T=0;for(b=0;b<c.length;++b){let U=c[b];if(xe(U,Uint8Array))T+U.length>B.length?(o.isBuffer(U)||(U=o.from(U)),U.copy(B,T)):Uint8Array.prototype.set.call(B,U,T);else if(o.isBuffer(U))U.copy(B,T);else throw new TypeError('"list" argument must be an Array of Buffers');T+=U.length}return B};function g(x,c){if(o.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||xe(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const l=x.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&l===0)return 0;let B=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Ve(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Qe(x).length;default:if(B)return b?-1:Ve(x).length;c=(""+c).toLowerCase(),B=!0}}o.byteLength=g;function E(x,c,l){let b=!1;if((c===void 0||c<0)&&(c=0),c>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,c>>>=0,l<=c))return"";for(x||(x="utf8");;)switch(x){case"hex":return ce(this,c,l);case"utf8":case"utf-8":return V(this,c,l);case"ascii":return ue(this,c,l);case"latin1":case"binary":return ee(this,c,l);case"base64":return O(this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,c,l);default:if(b)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),b=!0}}o.prototype._isBuffer=!0;function k(x,c,l){const b=x[c];x[c]=x[l],x[l]=b}o.prototype.swap16=function(){const c=this.length;if(c%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<c;l+=2)k(this,l,l+1);return this},o.prototype.swap32=function(){const c=this.length;if(c%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<c;l+=4)k(this,l,l+3),k(this,l+1,l+2);return this},o.prototype.swap64=function(){const c=this.length;if(c%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<c;l+=8)k(this,l,l+7),k(this,l+1,l+6),k(this,l+2,l+5),k(this,l+3,l+4);return this},o.prototype.toString=function(){const c=this.length;return c===0?"":arguments.length===0?V(this,0,c):E.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(c){if(!o.isBuffer(c))throw new TypeError("Argument must be a Buffer");return this===c?!0:o.compare(this,c)===0},o.prototype.inspect=function(){let c="";const l=i.INSPECT_MAX_BYTES;return c=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(c+=" ... "),"<Buffer "+c+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(c,l,b,B,T){if(xe(c,Uint8Array)&&(c=o.from(c,c.offset,c.byteLength)),!o.isBuffer(c))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof c);if(l===void 0&&(l=0),b===void 0&&(b=c?c.length:0),B===void 0&&(B=0),T===void 0&&(T=this.length),l<0||b>c.length||B<0||T>this.length)throw new RangeError("out of range index");if(B>=T&&l>=b)return 0;if(B>=T)return-1;if(l>=b)return 1;if(l>>>=0,b>>>=0,B>>>=0,T>>>=0,this===c)return 0;let U=T-B,Q=b-l;const pe=Math.min(U,Q),fe=this.slice(B,T),ge=c.slice(l,b);for(let he=0;he<pe;++he)if(fe[he]!==ge[he]){U=fe[he],Q=ge[he];break}return U<Q?-1:Q<U?1:0};function D(x,c,l,b,B){if(x.length===0)return-1;if(typeof l=="string"?(b=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Ie(l)&&(l=B?0:x.length-1),l<0&&(l=x.length+l),l>=x.length){if(B)return-1;l=x.length-1}else if(l<0)if(B)l=0;else return-1;if(typeof c=="string"&&(c=o.from(c,b)),o.isBuffer(c))return c.length===0?-1:F(x,c,l,b,B);if(typeof c=="number")return c=c&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(x,c,l):Uint8Array.prototype.lastIndexOf.call(x,c,l):F(x,[c],l,b,B);throw new TypeError("val must be string, number or Buffer")}function F(x,c,l,b,B){let T=1,U=x.length,Q=c.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(x.length<2||c.length<2)return-1;T=2,U/=2,Q/=2,l/=2}function pe(ge,he){return T===1?ge[he]:ge.readUInt16BE(he*T)}let fe;if(B){let ge=-1;for(fe=l;fe<U;fe++)if(pe(x,fe)===pe(c,ge===-1?0:fe-ge)){if(ge===-1&&(ge=fe),fe-ge+1===Q)return ge*T}else ge!==-1&&(fe-=fe-ge),ge=-1}else for(l+Q>U&&(l=U-Q),fe=l;fe>=0;fe--){let ge=!0;for(let he=0;he<Q;he++)if(pe(x,fe+he)!==pe(c,he)){ge=!1;break}if(ge)return fe}return-1}o.prototype.includes=function(c,l,b){return this.indexOf(c,l,b)!==-1},o.prototype.indexOf=function(c,l,b){return D(this,c,l,b,!0)},o.prototype.lastIndexOf=function(c,l,b){return D(this,c,l,b,!1)};function P(x,c,l,b){l=Number(l)||0;const B=x.length-l;b?(b=Number(b),b>B&&(b=B)):b=B;const T=c.length;b>T/2&&(b=T/2);let U;for(U=0;U<b;++U){const Q=parseInt(c.substr(U*2,2),16);if(Ie(Q))return U;x[l+U]=Q}return U}function H(x,c,l,b){return Se(Ve(c,x.length-l),x,l,b)}function S(x,c,l,b){return Se(Je(c),x,l,b)}function R(x,c,l,b){return Se(Qe(c),x,l,b)}function N(x,c,l,b){return Se(Xe(c,x.length-l),x,l,b)}o.prototype.write=function(c,l,b,B){if(l===void 0)B="utf8",b=this.length,l=0;else if(b===void 0&&typeof l=="string")B=l,b=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(b)?(b=b>>>0,B===void 0&&(B="utf8")):(B=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const T=this.length-l;if((b===void 0||b>T)&&(b=T),c.length>0&&(b<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let U=!1;for(;;)switch(B){case"hex":return P(this,c,l,b);case"utf8":case"utf-8":return H(this,c,l,b);case"ascii":case"latin1":case"binary":return S(this,c,l,b);case"base64":return R(this,c,l,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,c,l,b);default:if(U)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),U=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(x,c,l){return c===0&&l===x.length?e.fromByteArray(x):e.fromByteArray(x.slice(c,l))}function V(x,c,l){l=Math.min(x.length,l);const b=[];let B=c;for(;B<l;){const T=x[B];let U=null,Q=T>239?4:T>223?3:T>191?2:1;if(B+Q<=l){let pe,fe,ge,he;switch(Q){case 1:T<128&&(U=T);break;case 2:pe=x[B+1],(pe&192)===128&&(he=(T&31)<<6|pe&63,he>127&&(U=he));break;case 3:pe=x[B+1],fe=x[B+2],(pe&192)===128&&(fe&192)===128&&(he=(T&15)<<12|(pe&63)<<6|fe&63,he>2047&&(he<55296||he>57343)&&(U=he));break;case 4:pe=x[B+1],fe=x[B+2],ge=x[B+3],(pe&192)===128&&(fe&192)===128&&(ge&192)===128&&(he=(T&15)<<18|(pe&63)<<12|(fe&63)<<6|ge&63,he>65535&&he<1114112&&(U=he))}}U===null?(U=65533,Q=1):U>65535&&(U-=65536,b.push(U>>>10&1023|55296),U=56320|U&1023),b.push(U),B+=Q}return J(b)}const K=4096;function J(x){const c=x.length;if(c<=K)return String.fromCharCode.apply(String,x);let l="",b=0;for(;b<c;)l+=String.fromCharCode.apply(String,x.slice(b,b+=K));return l}function ue(x,c,l){let b="";l=Math.min(x.length,l);for(let B=c;B<l;++B)b+=String.fromCharCode(x[B]&127);return b}function ee(x,c,l){let b="";l=Math.min(x.length,l);for(let B=c;B<l;++B)b+=String.fromCharCode(x[B]);return b}function ce(x,c,l){const b=x.length;(!c||c<0)&&(c=0),(!l||l<0||l>b)&&(l=b);let B="";for(let T=c;T<l;++T)B+=lt[x[T]];return B}function ie(x,c,l){const b=x.slice(c,l);let B="";for(let T=0;T<b.length-1;T+=2)B+=String.fromCharCode(b[T]+b[T+1]*256);return B}o.prototype.slice=function(c,l){const b=this.length;c=~~c,l=l===void 0?b:~~l,c<0?(c+=b,c<0&&(c=0)):c>b&&(c=b),l<0?(l+=b,l<0&&(l=0)):l>b&&(l=b),l<c&&(l=c);const B=this.subarray(c,l);return Object.setPrototypeOf(B,o.prototype),B};function j(x,c,l){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+c>l)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(c,l,b){c=c>>>0,l=l>>>0,b||j(c,l,this.length);let B=this[c],T=1,U=0;for(;++U<l&&(T*=256);)B+=this[c+U]*T;return B},o.prototype.readUintBE=o.prototype.readUIntBE=function(c,l,b){c=c>>>0,l=l>>>0,b||j(c,l,this.length);let B=this[c+--l],T=1;for(;l>0&&(T*=256);)B+=this[c+--l]*T;return B},o.prototype.readUint8=o.prototype.readUInt8=function(c,l){return c=c>>>0,l||j(c,1,this.length),this[c]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(c,l){return c=c>>>0,l||j(c,2,this.length),this[c]|this[c+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(c,l){return c=c>>>0,l||j(c,2,this.length),this[c]<<8|this[c+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(c,l){return c=c>>>0,l||j(c,4,this.length),(this[c]|this[c+1]<<8|this[c+2]<<16)+this[c+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(c,l){return c=c>>>0,l||j(c,4,this.length),this[c]*16777216+(this[c+1]<<16|this[c+2]<<8|this[c+3])},o.prototype.readBigUInt64LE=Oe(function(c){c=c>>>0,Ae(c,"offset");const l=this[c],b=this[c+7];(l===void 0||b===void 0)&&we(c,this.length-8);const B=l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24,T=this[++c]+this[++c]*2**8+this[++c]*2**16+b*2**24;return BigInt(B)+(BigInt(T)<<BigInt(32))}),o.prototype.readBigUInt64BE=Oe(function(c){c=c>>>0,Ae(c,"offset");const l=this[c],b=this[c+7];(l===void 0||b===void 0)&&we(c,this.length-8);const B=l*2**24+this[++c]*2**16+this[++c]*2**8+this[++c],T=this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+b;return(BigInt(B)<<BigInt(32))+BigInt(T)}),o.prototype.readIntLE=function(c,l,b){c=c>>>0,l=l>>>0,b||j(c,l,this.length);let B=this[c],T=1,U=0;for(;++U<l&&(T*=256);)B+=this[c+U]*T;return T*=128,B>=T&&(B-=Math.pow(2,8*l)),B},o.prototype.readIntBE=function(c,l,b){c=c>>>0,l=l>>>0,b||j(c,l,this.length);let B=l,T=1,U=this[c+--B];for(;B>0&&(T*=256);)U+=this[c+--B]*T;return T*=128,U>=T&&(U-=Math.pow(2,8*l)),U},o.prototype.readInt8=function(c,l){return c=c>>>0,l||j(c,1,this.length),this[c]&128?(255-this[c]+1)*-1:this[c]},o.prototype.readInt16LE=function(c,l){c=c>>>0,l||j(c,2,this.length);const b=this[c]|this[c+1]<<8;return b&32768?b|4294901760:b},o.prototype.readInt16BE=function(c,l){c=c>>>0,l||j(c,2,this.length);const b=this[c+1]|this[c]<<8;return b&32768?b|4294901760:b},o.prototype.readInt32LE=function(c,l){return c=c>>>0,l||j(c,4,this.length),this[c]|this[c+1]<<8|this[c+2]<<16|this[c+3]<<24},o.prototype.readInt32BE=function(c,l){return c=c>>>0,l||j(c,4,this.length),this[c]<<24|this[c+1]<<16|this[c+2]<<8|this[c+3]},o.prototype.readBigInt64LE=Oe(function(c){c=c>>>0,Ae(c,"offset");const l=this[c],b=this[c+7];(l===void 0||b===void 0)&&we(c,this.length-8);const B=this[c+4]+this[c+5]*2**8+this[c+6]*2**16+(b<<24);return(BigInt(B)<<BigInt(32))+BigInt(l+this[++c]*2**8+this[++c]*2**16+this[++c]*2**24)}),o.prototype.readBigInt64BE=Oe(function(c){c=c>>>0,Ae(c,"offset");const l=this[c],b=this[c+7];(l===void 0||b===void 0)&&we(c,this.length-8);const B=(l<<24)+this[++c]*2**16+this[++c]*2**8+this[++c];return(BigInt(B)<<BigInt(32))+BigInt(this[++c]*2**24+this[++c]*2**16+this[++c]*2**8+b)}),o.prototype.readFloatLE=function(c,l){return c=c>>>0,l||j(c,4,this.length),t.read(this,c,!0,23,4)},o.prototype.readFloatBE=function(c,l){return c=c>>>0,l||j(c,4,this.length),t.read(this,c,!1,23,4)},o.prototype.readDoubleLE=function(c,l){return c=c>>>0,l||j(c,8,this.length),t.read(this,c,!0,52,8)},o.prototype.readDoubleBE=function(c,l){return c=c>>>0,l||j(c,8,this.length),t.read(this,c,!1,52,8)};function I(x,c,l,b,B,T){if(!o.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(c>B||c<T)throw new RangeError('"value" argument is out of bounds');if(l+b>x.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(c,l,b,B){if(c=+c,l=l>>>0,b=b>>>0,!B){const Q=Math.pow(2,8*b)-1;I(this,c,l,b,Q,0)}let T=1,U=0;for(this[l]=c&255;++U<b&&(T*=256);)this[l+U]=c/T&255;return l+b},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(c,l,b,B){if(c=+c,l=l>>>0,b=b>>>0,!B){const Q=Math.pow(2,8*b)-1;I(this,c,l,b,Q,0)}let T=b-1,U=1;for(this[l+T]=c&255;--T>=0&&(U*=256);)this[l+T]=c/U&255;return l+b},o.prototype.writeUint8=o.prototype.writeUInt8=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,1,255,0),this[l]=c&255,l+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,2,65535,0),this[l]=c&255,this[l+1]=c>>>8,l+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,2,65535,0),this[l]=c>>>8,this[l+1]=c&255,l+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,4,4294967295,0),this[l+3]=c>>>24,this[l+2]=c>>>16,this[l+1]=c>>>8,this[l]=c&255,l+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,4,4294967295,0),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4};function $(x,c,l,b,B){We(c,b,B,x,l,7);let T=Number(c&BigInt(4294967295));x[l++]=T,T=T>>8,x[l++]=T,T=T>>8,x[l++]=T,T=T>>8,x[l++]=T;let U=Number(c>>BigInt(32)&BigInt(4294967295));return x[l++]=U,U=U>>8,x[l++]=U,U=U>>8,x[l++]=U,U=U>>8,x[l++]=U,l}function L(x,c,l,b,B){We(c,b,B,x,l,7);let T=Number(c&BigInt(4294967295));x[l+7]=T,T=T>>8,x[l+6]=T,T=T>>8,x[l+5]=T,T=T>>8,x[l+4]=T;let U=Number(c>>BigInt(32)&BigInt(4294967295));return x[l+3]=U,U=U>>8,x[l+2]=U,U=U>>8,x[l+1]=U,U=U>>8,x[l]=U,l+8}o.prototype.writeBigUInt64LE=Oe(function(c,l=0){return $(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Oe(function(c,l=0){return L(this,c,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(c,l,b,B){if(c=+c,l=l>>>0,!B){const pe=Math.pow(2,8*b-1);I(this,c,l,b,pe-1,-pe)}let T=0,U=1,Q=0;for(this[l]=c&255;++T<b&&(U*=256);)c<0&&Q===0&&this[l+T-1]!==0&&(Q=1),this[l+T]=(c/U>>0)-Q&255;return l+b},o.prototype.writeIntBE=function(c,l,b,B){if(c=+c,l=l>>>0,!B){const pe=Math.pow(2,8*b-1);I(this,c,l,b,pe-1,-pe)}let T=b-1,U=1,Q=0;for(this[l+T]=c&255;--T>=0&&(U*=256);)c<0&&Q===0&&this[l+T+1]!==0&&(Q=1),this[l+T]=(c/U>>0)-Q&255;return l+b},o.prototype.writeInt8=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,1,127,-128),c<0&&(c=255+c+1),this[l]=c&255,l+1},o.prototype.writeInt16LE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,2,32767,-32768),this[l]=c&255,this[l+1]=c>>>8,l+2},o.prototype.writeInt16BE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,2,32767,-32768),this[l]=c>>>8,this[l+1]=c&255,l+2},o.prototype.writeInt32LE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,4,2147483647,-2147483648),this[l]=c&255,this[l+1]=c>>>8,this[l+2]=c>>>16,this[l+3]=c>>>24,l+4},o.prototype.writeInt32BE=function(c,l,b){return c=+c,l=l>>>0,b||I(this,c,l,4,2147483647,-2147483648),c<0&&(c=4294967295+c+1),this[l]=c>>>24,this[l+1]=c>>>16,this[l+2]=c>>>8,this[l+3]=c&255,l+4},o.prototype.writeBigInt64LE=Oe(function(c,l=0){return $(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Oe(function(c,l=0){return L(this,c,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function oe(x,c,l,b,B,T){if(l+b>x.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function le(x,c,l,b,B){return c=+c,l=l>>>0,B||oe(x,c,l,4),t.write(x,c,l,b,23,4),l+4}o.prototype.writeFloatLE=function(c,l,b){return le(this,c,l,!0,b)},o.prototype.writeFloatBE=function(c,l,b){return le(this,c,l,!1,b)};function be(x,c,l,b,B){return c=+c,l=l>>>0,B||oe(x,c,l,8),t.write(x,c,l,b,52,8),l+8}o.prototype.writeDoubleLE=function(c,l,b){return be(this,c,l,!0,b)},o.prototype.writeDoubleBE=function(c,l,b){return be(this,c,l,!1,b)},o.prototype.copy=function(c,l,b,B){if(!o.isBuffer(c))throw new TypeError("argument should be a Buffer");if(b||(b=0),!B&&B!==0&&(B=this.length),l>=c.length&&(l=c.length),l||(l=0),B>0&&B<b&&(B=b),B===b||c.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),c.length-l<B-b&&(B=c.length-l+b);const T=B-b;return this===c&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,b,B):Uint8Array.prototype.set.call(c,this.subarray(b,B),l),T},o.prototype.fill=function(c,l,b,B){if(typeof c=="string"){if(typeof l=="string"?(B=l,l=0,b=this.length):typeof b=="string"&&(B=b,b=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!o.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(c.length===1){const U=c.charCodeAt(0);(B==="utf8"&&U<128||B==="latin1")&&(c=U)}}else typeof c=="number"?c=c&255:typeof c=="boolean"&&(c=Number(c));if(l<0||this.length<l||this.length<b)throw new RangeError("Out of range index");if(b<=l)return this;l=l>>>0,b=b===void 0?this.length:b>>>0,c||(c=0);let T;if(typeof c=="number")for(T=l;T<b;++T)this[T]=c;else{const U=o.isBuffer(c)?c:o.from(c,B),Q=U.length;if(Q===0)throw new TypeError('The value "'+c+'" is invalid for argument "value"');for(T=0;T<b-l;++T)this[T+l]=U[T%Q]}return this};const Y={};function Le(x,c,l){Y[x]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(x,c){return`The "${x}" argument must be of type number. Received type ${typeof c}`},TypeError),Le("ERR_OUT_OF_RANGE",function(x,c,l){let b=`The value of "${x}" is out of range.`,B=l;return Number.isInteger(l)&&Math.abs(l)>2**32?B=Pe(String(l)):typeof l=="bigint"&&(B=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(B=Pe(B)),B+="n"),b+=` It must be ${c}. Received ${B}`,b},RangeError);function Pe(x){let c="",l=x.length;const b=x[0]==="-"?1:0;for(;l>=b+4;l-=3)c=`_${x.slice(l-3,l)}${c}`;return`${x.slice(0,l)}${c}`}function mt(x,c,l){Ae(c,"offset"),(x[c]===void 0||x[c+l]===void 0)&&we(c,x.length-(l+1))}function We(x,c,l,b,B,T){if(x>l||x<c){const U=typeof c=="bigint"?"n":"";let Q;throw c===0||c===BigInt(0)?Q=`>= 0${U} and < 2${U} ** ${(T+1)*8}${U}`:Q=`>= -(2${U} ** ${(T+1)*8-1}${U}) and < 2 ** ${(T+1)*8-1}${U}`,new Y.ERR_OUT_OF_RANGE("value",Q,x)}mt(b,B,T)}function Ae(x,c){if(typeof x!="number")throw new Y.ERR_INVALID_ARG_TYPE(c,"number",x)}function we(x,c,l){throw Math.floor(x)!==x?(Ae(x,l),new Y.ERR_OUT_OF_RANGE("offset","an integer",x)):c<0?new Y.ERR_BUFFER_OUT_OF_BOUNDS:new Y.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${c}`,x)}const Me=/[^+/0-9A-Za-z-_]/g;function ze(x){if(x=x.split("=")[0],x=x.trim().replace(Me,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function Ve(x,c){c=c||1/0;let l;const b=x.length;let B=null;const T=[];for(let U=0;U<b;++U){if(l=x.charCodeAt(U),l>55295&&l<57344){if(!B){if(l>56319){(c-=3)>-1&&T.push(239,191,189);continue}else if(U+1===b){(c-=3)>-1&&T.push(239,191,189);continue}B=l;continue}if(l<56320){(c-=3)>-1&&T.push(239,191,189),B=l;continue}l=(B-55296<<10|l-56320)+65536}else B&&(c-=3)>-1&&T.push(239,191,189);if(B=null,l<128){if((c-=1)<0)break;T.push(l)}else if(l<2048){if((c-=2)<0)break;T.push(l>>6|192,l&63|128)}else if(l<65536){if((c-=3)<0)break;T.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((c-=4)<0)break;T.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return T}function Je(x){const c=[];for(let l=0;l<x.length;++l)c.push(x.charCodeAt(l)&255);return c}function Xe(x,c){let l,b,B;const T=[];for(let U=0;U<x.length&&!((c-=2)<0);++U)l=x.charCodeAt(U),b=l>>8,B=l%256,T.push(B),T.push(b);return T}function Qe(x){return e.toByteArray(ze(x))}function Se(x,c,l,b){let B;for(B=0;B<b&&!(B+l>=c.length||B>=x.length);++B)c[B+l]=x[B];return B}function xe(x,c){return x instanceof c||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===c.name}function Ie(x){return x!==x}const lt=function(){const x="0123456789abcdef",c=new Array(256);for(let l=0;l<16;++l){const b=l*16;for(let B=0;B<16;++B)c[b+B]=x[l]+x[B]}return c}();function Oe(x){return typeof BigInt>"u"?Ke:x}function Ke(){throw new Error("BigInt not supported")}})(On);typeof window<"u"&&(window.Buffer=On.Buffer);en(document.getElementById("root")).render(W.jsxDEV(q.StrictMode,{children:W.jsxDEV(il,{},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/main.tsx",lineNumber:14,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/main.tsx",lineNumber:13,columnNumber:3},void 0));export{Ne as S,se as _,Dl as a,W as j,_e as s,Cc as u,kl as v,ye as z};
