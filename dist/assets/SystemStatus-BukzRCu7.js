import{j as e}from"./index-mfTr1OfE.js";import{r as d}from"./react-BKEbDJhF.js";import{m as p,A as S}from"./motion-BaJTjmjD.js";import{aJ as v,aK as h,aG as y,x as w,a7 as D,r as U,aj as x,o as g}from"./icons-5Lq8eyna.js";import"./vendor-CmZZtmkI.js";const T=()=>{const[s,a]=d.useState({online:navigator.onLine,apiStatus:"healthy",databaseStatus:"healthy",lastCheck:new Date,responseTime:0}),[m,j]=d.useState(!1);d.useEffect(()=>{const t=()=>{a(o=>({...o,online:!0})),n()},r=()=>{a(o=>({...o,online:!1,apiStatus:"down",databaseStatus:"down"}))};window.addEventListener("online",t),window.addEventListener("offline",r);const i=setInterval(n,6e4);return n(),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r),clearInterval(i)}},[]);const n=async()=>{if(navigator.onLine)try{const t=Date.now(),i=await fetch("https://smartstartai-backend-production.up.railway.app/health",{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)}),o=Date.now()-t;if(i.ok){const c=await i.json();a(f=>{var b;return{...f,apiStatus:c.status==="healthy"?"healthy":"degraded",databaseStatus:(b=c.components)!=null&&b.database?"healthy":"degraded",lastCheck:new Date,responseTime:o}})}else a(c=>({...c,apiStatus:"degraded",databaseStatus:"degraded",lastCheck:new Date,responseTime:o}))}catch(t){console.warn("Health check failed:",t),a(r=>({...r,apiStatus:"down",databaseStatus:"down",lastCheck:new Date,responseTime:0}))}},l=t=>{switch(t){case"healthy":return"text-green-600";case"degraded":return"text-yellow-600";case"down":return"text-red-600"}},u=!s.online||s.apiStatus==="down"||s.databaseStatus==="down"?{status:"down",color:"text-red-600",icon:x}:s.apiStatus==="degraded"||s.databaseStatus==="degraded"?{status:"degraded",color:"text-yellow-600",icon:x}:{status:"healthy",color:"text-green-600",icon:g},N=u.icon;return e.jsxDEV("div",{className:"fixed top-4 left-4 z-50",children:e.jsxDEV(p.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-3",children:[e.jsxDEV("button",{onClick:()=>j(!m),className:"flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg p-2 transition-colors","aria-expanded":m,"aria-label":"عرض تفاصيل حالة النظام",children:[e.jsxDEV(N,{className:`h-5 w-5 ${u.color}`},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:153,columnNumber:11},void 0),e.jsxDEV("span",{className:"font-almarai font-bold text-gray-800 dark:text-gray-200 text-sm",children:"حالة النظام"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:154,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:147,columnNumber:9},void 0),e.jsxDEV(S,{children:m&&e.jsxDEV(p.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[s.online?e.jsxDEV(v,{className:"h-4 w-4 text-green-600"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:171,columnNumber:21},void 0):e.jsxDEV(h,{className:"h-4 w-4 text-red-600"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:173,columnNumber:21},void 0),e.jsxDEV("span",{className:"font-almarai text-sm text-gray-700 dark:text-gray-300",children:"الاتصال"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:175,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:169,columnNumber:17},void 0),e.jsxDEV("span",{className:`text-sm font-bold ${s.online?"text-green-600":"text-red-600"}`,children:s.online?"متصل":"منقطع"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:177,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:168,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(y,{className:`h-4 w-4 ${l(s.apiStatus)}`},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:185,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-almarai text-sm text-gray-700 dark:text-gray-300",children:"الخادم"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:186,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:184,columnNumber:17},void 0),e.jsxDEV("span",{className:`text-sm font-bold ${l(s.apiStatus)}`,children:s.apiStatus==="healthy"?"سليم":s.apiStatus==="degraded"?"بطيء":"معطل"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:188,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:183,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(w,{className:`h-4 w-4 ${l(s.databaseStatus)}`},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:197,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-almarai text-sm text-gray-700 dark:text-gray-300",children:"قاعدة البيانات"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:198,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:196,columnNumber:17},void 0),e.jsxDEV("span",{className:`text-sm font-bold ${l(s.databaseStatus)}`,children:s.databaseStatus==="healthy"?"سليم":s.databaseStatus==="degraded"?"بطيء":"معطل"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:200,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:195,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(D,{className:"h-4 w-4 text-blue-600"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:209,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-almarai text-sm text-gray-700 dark:text-gray-300",children:"وقت الاستجابة"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:210,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:208,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-sm font-bold text-blue-600",children:[s.responseTime,"ms"]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:212,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:207,columnNumber:15},void 0),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(U,{className:"h-4 w-4 text-gray-500"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:220,columnNumber:19},void 0),e.jsxDEV("span",{className:"font-almarai text-sm text-gray-700 dark:text-gray-300",children:"آخر فحص"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:221,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:219,columnNumber:17},void 0),e.jsxDEV("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.lastCheck.toLocaleTimeString("ar-SA")},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:223,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:218,columnNumber:15},void 0),e.jsxDEV("button",{onClick:n,className:"w-full bg-saudi-green text-white py-2 rounded-lg font-almarai text-sm hover:bg-saudi-green/90 transition-colors",children:"إعادة فحص النظام"},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:229,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:161,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:159,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:142,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/User/Downloads/project-bolt-sb1-szjsaox8 (10)/project/src/components/SystemStatus.tsx",lineNumber:141,columnNumber:5},void 0)};export{T as default};
